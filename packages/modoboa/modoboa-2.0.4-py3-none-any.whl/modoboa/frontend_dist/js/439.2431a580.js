"use strict";(self["webpackChunkModoboa"]=self["webpackChunkModoboa"]||[]).push([[439],{1395:function(t,e,s){s.r(e),s.d(e,{default:function(){return S}});var a=s(6313),n=s(7953),r=function(){var t=this,e=t._self._c;return e("div",[e(a.Z,{attrs:{flat:""}},[e(n.qW,[e("translate",[t._v("Opened alarms")])],1)],1),e("alarm-list")],1)},l=[],o=s(4562),i=s(4145),c=s(4127),d=s(3863),h=s(4324),u=s(5808),m=s(4528),p=s(3687),f=s(7808),v=function(){var t=this,e=t._self._c;return e(i.Z,{staticClass:"mt-6"},[e(a.Z,{attrs:{flat:""}},[e(m.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,t._g(t._b({attrs:{small:""}},"v-btn",a,!1),s),[t._v(" Actions "),e(h.Z,{attrs:{right:""}},[t._v("mdi-chevron-down")])],1)]}}])},[e(u.Z,{attrs:{dense:""}})],1),e(p.Z),e(f.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search",filled:"",outlined:"",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(d.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.alarms,search:t.search,"item-key":"pk",options:t.options,"server-items-length":t.totalAlarms,loading:t.loading,"show-select":""},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[1===s.status?e(c.Z,{attrs:{color:"warning",small:""}},[e("translate",[t._v("Opened")])],1):e(c.Z,{attrs:{color:"info",small:""}},[e("translate",[t._v("Closed")])],1)]}},{key:"item.mailbox",fn:function({item:e}){return[e.mailbox?[t._v(" "+t._s(e.mailbox.address)+"@"+t._s(e.domain.name)+" ")]:t._e()]}},{key:"item.created",fn:function({item:e}){return[t._v(" "+t._s(t._f("date")(e.created))+" ")]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},g=[],_=s(2201);const x="alarms";var Z={getAll(t){return _.Z.get(`${x}/`,{params:t})}},b={data(){return{alarms:[],headers:[{text:this.$gettext("Triggered"),value:"created"},{text:this.$gettext("Status"),value:"status"},{text:this.$gettext("Domain"),value:"domain.name",sortable:!1},{text:this.$gettext("Mailbox"),value:"mailbox",sortable:!1},{text:this.$gettext("Message"),value:"title"}],loading:!0,options:{},search:"",selected:[],totalAlarms:0}},methods:{fetchAlarms(){const t={page:this.options.page};this.options.sortBy&&(t.ordering=this.options.sortBy.map((t=>this.options.sortDesc[0]?`-${t}`:t)).join(",")),""!==this.search&&(t.search=this.search),this.loading=!0,Z.getAll(t).then((t=>{this.alarms=t.data.results,this.totalAlarms=t.data.count,this.loading=!1}))}},mounted(){this.fetchAlarms()},watch:{options:{handler(){this.fetchAlarms()},deep:!0},search(){this.fetchAlarms()}}},k=b,A=s(1001),y=(0,A.Z)(k,v,g,!1,null,null,null),$=y.exports,w={components:{AlarmList:$}},C=w,M=(0,A.Z)(C,r,l,!1,null,"06761a60",null),S=M.exports},3687:function(t,e,s){s(9027);var a=s(5352);e["Z"]=(0,a.Ji)("spacer","div","v-spacer")}}]);
//# sourceMappingURL=439.2431a580.js.map