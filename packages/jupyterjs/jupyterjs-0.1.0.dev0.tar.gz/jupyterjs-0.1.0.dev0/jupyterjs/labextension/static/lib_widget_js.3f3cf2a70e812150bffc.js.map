{"version":3,"file":"lib_widget_js.3f3cf2a70e812150bffc.js","mappings":"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","sources":["webpack://jupyterjs/./css/widget.css","webpack://jupyterjs/./src/version.ts","webpack://jupyterjs/./src/widget.ts","webpack://jupyterjs/./css/widget.css?a195"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Copyright (c) AY\n// Distributed under the terms of the Modified BSD License.\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n","/* tslint:disable:no-unused-variable */\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n} from '@jupyter-widgets/base';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\nimport onChange from 'on-change';\nimport $ from 'jquery';\n\n// window.$ = $;\n\n// Import the CSS\nimport '../css/widget.css';\n\ndeclare global {\n  interface HTMLElement {\n    state: any;\n    methods: any;\n    pyCallbacks: any;\n    methodsToMatch: string[];\n    stateToMatch: string[];\n  }\n  interface Window {\n    $: any;\n  }\n}\n\ntype MapStates = string[];\ntype MapMethods = string[];\ntype PyKwargs = { [key: string]: any };\ntype CallBacks = string[];\n\ntype MapMethodMsg = ['js' | 'py', string];\ntype MapStateMsg = ['js' | 'py', string, any?];\n\nexport class EmailModel extends DOMWidgetModel {\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: EmailModel.model_name,\n      _model_module: EmailModel.model_module,\n      _model_module_version: EmailModel.model_module_version,\n      _view_name: EmailModel.view_name,\n      _view_module: EmailModel.view_module,\n      _view_module_version: EmailModel.view_module_version,\n      value: 'Hello World',\n    };\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // Add any extra serializers here\n  };\n\n  static model_name = 'EmailModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'EmailView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class EmailView extends DOMWidgetView {\n  private _emailInput: HTMLInputElement;\n\n  private syncLock: boolean;\n\n  render() {\n    const that = this;\n\n    window['$'] = $;\n\n    // override console.log to return args\n    // const test = () => {\n    //   console.error('test');\n    // };\n    // const _log = console.log.bind(console);\n    // console.log = function (...args) {\n    //   _log.apply(this, args);\n    // that.send({\n    //   type: 'cl',\n    //   code: args || '',\n    //   content: args || '',\n    // });\n    // };\n\n    // expose element in the JS scope\n    const element = that.el;\n    element.state = {};\n    element.state = onChange(element.state, that.onStateChange.bind(that));\n    element.stateToMatch = [];\n    console.log('bind element', element);\n    console.log('bind state', element.state);\n\n    element.methods = {};\n    element.methodsToMatch = [];\n\n    // py callbacks passed to js\n    element.pyCallbacks = {};\n\n    this.model.on('msg:custom', (content: any) => {\n      console.log('msg:custom', JSON.parse(JSON.stringify(content)));\n\n      if (!Array.isArray(content)) {\n        this.sendErrorMsg('invalid custom msg');\n      }\n\n      const msgType = content.shift();\n\n      if (msgType === 'script') {\n        const jsCode = content.shift();\n        // const mapstates = content[0] as MapStates;\n        // const mapmethods = content[1] as MapMethods;\n        const pykwargs = content[0] as PyKwargs;\n        const callbacks = content[1] as CallBacks;\n        const jsDeclarations = content[2] as string[];\n\n        this.handleScriptMsg(jsCode, pykwargs, callbacks, jsDeclarations);\n      } else if (msgType === 'method') {\n        const [method, kargs] = content;\n        this.handleMethodMsg(method, kargs);\n      } else if (msgType === 'mapmethod') {\n        const mapMethodsMsg = content[0] as MapMethodMsg[];\n        this.handleMapMethodMsg(mapMethodsMsg);\n      } else if (msgType === 'mapstate') {\n        const mapStateMsg = content[0] as any;\n        this.handleMapStateMsg(mapStateMsg);\n      } else if (msgType === 'js') {\n        console.log(content[0]);\n        eval(content[0]);\n      }\n\n      // else if (msgType === 'get') {\n      // if (jsCode in state) {\n      //   jsCode = `element.state.${jsCode}`;\n      // } else {\n      //   throw Error(`Variable ${state} not exists in the scope!`);\n      // }\n      //   that.evalJSScript(jsCode, 'get_callback');\n      // }\n    });\n\n    this.sendMsg('rendered');\n  }\n\n  _state(): any {\n    return this.el.state;\n  }\n\n  _methods(): any {\n    return this.el.methods;\n  }\n\n  onStateChange(path: string, value: any, previousValue: any, applyData: any) {\n    if (this.syncLock || value === previousValue) {\n      // disable when locked, or the value does not change (shallow compare)\n      return;\n    }\n\n    const stateParameter = path.split('.')[0];\n    const state = this._state();\n\n    console.error('onStateChange', state, stateParameter);\n\n    this.sendMsg('syncState', {\n      state: {\n        [stateParameter]: state[stateParameter],\n      },\n    });\n    // console.log('onStateChange', stateParameter, value);\n  }\n\n  /**\n   * Return a JS code for unpacking state\n   * @returns\n   */\n  _mapstate(jsDeclarations: string[]): string {\n    const state = this._state();\n    let stateProperties = Object.keys(state);\n    if (jsDeclarations && jsDeclarations.length) {\n      stateProperties = stateProperties.filter(\n        (x) => jsDeclarations.includes(x) === false // do not match those who declared in JS code\n      );\n    }\n\n    const jsCode = stateProperties.length\n      ? `try {\n        var {${stateProperties.join()}} = state;\n      } catch (e) {\n      };`\n      : '';\n    return jsCode;\n  }\n\n  _mapmethods(jsDeclarations: string[]): string {\n    const method = this._methods();\n    let methods = Object.keys(method);\n    if (jsDeclarations && jsDeclarations.length) {\n      // do not match those who declared in JS code\n      methods = methods.filter((x) => jsDeclarations.includes(x) === false);\n    }\n\n    const jsCode = methods.length\n      ? `try {\n        var {${methods.join()}} = element.methods;\n      } catch (e) {\n      };`\n      : '';\n    return jsCode;\n  }\n\n  handleMethodMsg(method: any, kargs: any) {\n    const methods = this._methods();\n    if (!(method in methods)) {\n      throw Error(`Method ${method} is not found.`);\n    }\n    methods[method].apply(null, kargs);\n  }\n\n  handleScriptMsg(\n    jsCode: string,\n    pykwargs: PyKwargs,\n    callbacks: CallBacks,\n    jsDeclarations: string[]\n  ) {\n    console.log('handleScriptMsg', pykwargs, callbacks, jsDeclarations);\n    const that = this;\n    const element = this.el;\n    const state = this._state();\n    const methods = this._methods();\n\n    // disable sync state until finishing eval()\n    this.syncLock = true;\n\n    // init pykwargs in js\n    let js_prefix = ';';\n\n    // unpack state and method\n    const j = this._mapstate(jsDeclarations);\n    if (j && j.length) {\n      js_prefix += j;\n    }\n    const m = this._mapmethods(jsDeclarations);\n    if (m && m.length) {\n      js_prefix += m;\n    }\n\n    // register callbacks\n    if (callbacks && Object.keys(callbacks).length) {\n      for (const callback of callbacks) {\n        const cf = `function (...args) { \n          element.pyCallbacks.${callback}.apply(null, args); \n        }`;\n        const c = `if (typeof ${callback} === \"undefined\") {\n          var ${callback} = ${cf};\n        } else {\n          ${callback} = ${cf};\n        }`;\n        js_prefix += c;\n        element.pyCallbacks[callback] = (...args: any[]) => {\n          // console.error('onsend', 'callback');\n          this.sendMsg('callback', {\n            method: callback,\n            args: args,\n          });\n        };\n      }\n    }\n\n    // register pykwargs\n    for (const pykwarg in pykwargs) {\n      // let temp_value = value\n      const c = `if (typeof ${pykwarg} === 'undefined') {\n        var ${pykwarg} = pykwargs.${pykwarg};\n      } else {\n        ${pykwarg} = pykwargs.${pykwarg};\n      };`;\n      js_prefix += c;\n    }\n\n    // register and update states\n    let js_postfix = ';';\n    for (const mapstate of Object.keys(state)) {\n      js_postfix += `state.${mapstate} = ${mapstate};`;\n    }\n    for (const m of element.stateToMatch) {\n      js_postfix += `try {\n        state.${m} = ${m};\n        element.stateToMatch = element.stateToMatch.filter(x => x != ${m});\n      } catch (e) {}`;\n    }\n\n    for (const mapmethod of Object.keys(methods)) {\n      js_postfix += `element.methods.${mapmethod} = ${mapmethod};`;\n    }\n    for (const m of element.methodsToMatch) {\n      js_postfix += `try {\n        element.methods.${m} = ${m};\n        element.methodsToMatch = element.methodsToMatch.filter(x => x != ${m});\n      } catch (e) {\n        console.error(\"fail to map method\", e);\n      }`;\n    }\n\n    // execute js code\n    jsCode = js_prefix + jsCode + js_postfix;\n    console.log(jsCode);\n    try {\n      eval(jsCode);\n    } catch (e: unknown) {\n      if (e instanceof Error) {\n        console.error(e.message);\n        that.sendErrorMsg(e.message);\n      }\n    }\n\n    this.syncLock = false;\n    this.syncState();\n  }\n\n  /**\n   * Sync state from JS to py\n   */\n  syncState() {\n    this.sendMsg('syncState', {\n      state: this._state(),\n    });\n  }\n\n  handleMapStateMsg(mapStateMsgs: MapStateMsg[]) {\n    const state = this._state();\n    const element = this.el;\n    let jsCode = '';\n    let buffer = {} as any;\n    for (const msg of mapStateMsgs) {\n      const t = msg.shift();\n      if (t === 'js') {\n        element.stateToMatch.push(msg[0]);\n      } else if (t === 'py') {\n        buffer[msg[0]] = msg[1];\n        jsCode += `state.${msg[0]} = buffer[\"${msg[0]}\"];`;\n      }\n    }\n    eval(jsCode);\n  }\n\n  handleMapMethodMsg(mapMethodsMsgs: MapMethodMsg[]) {\n    const methods = this._methods();\n    const element = this.el;\n\n    let jsCode = '';\n    for (const method of mapMethodsMsgs) {\n      const [t, callback] = method;\n\n      if (t === 'js') {\n        element.methodsToMatch.push(callback);\n        // jsCode += `methods.${callback} = null;`;\n      } else if (t === 'py') {\n        const cf = `function (...args) { \n          element.methods.${callback}.apply(null, args); \n        }`;\n        const c = `if (typeof ${callback} === \"undefined\") {\n          var ${callback} = ${cf};\n        } else {\n          ${callback} = ${cf};\n        }`;\n        jsCode += c;\n        methods[callback] = (...args: any[]) => {\n          // console.error('onsend', 'callback');\n          this.sendMsg('callback', {\n            method: callback,\n            args: args,\n          });\n        };\n      } else {\n        this.sendErrorMsg('Invalid mapmethod msg.');\n      }\n    }\n\n    this.evalJS(jsCode);\n  }\n\n  evalJS(jsCode: string) {\n    const that = this;\n    const methods = this._methods();\n    const element = this.$el;\n    const state = this._state();\n    try {\n      eval(jsCode);\n    } catch (e: unknown) {\n      // console.error(e);\n      if (e instanceof Error) {\n        console.error(e.message);\n        this.sendErrorMsg(e.message);\n      }\n    }\n  }\n\n  // evalJSScript(jsCode: string, type: string) {\n  //   const element = this.el;\n\n  //   const state = (element as any).state;\n  //   const stateProperties = Object.keys(state);\n  //   let t = '';\n  //   if (stateProperties.length) {\n  //     t = `let {${stateProperties.join()}} = element.state`;\n  //     eval(t);\n  //   }\n\n  //   const result = eval(`${t}; ${jsCode}`);\n  //   // console.error('evalJSScript', jsCode, result);\n\n  //   this.send({\n  //     type: type,\n  //     code: jsCode,\n  //     content: result,\n  //   });\n  // }\n\n  sendMsg(type: string, content: any = {}) {\n    this.send({ type, ...content });\n  }\n\n  sendErrorMsg(errorMsg: string) {\n    const msg = {\n      content: errorMsg,\n      type: 'error',\n    };\n    console.error(msg.content);\n    this.send(msg);\n  }\n\n  // value_changed() {\n  //   this.el.textContent = this.model.get('value');\n  // }\n}\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":[],"sourceRoot":""}