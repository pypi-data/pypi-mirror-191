calc_with_mem
tests
