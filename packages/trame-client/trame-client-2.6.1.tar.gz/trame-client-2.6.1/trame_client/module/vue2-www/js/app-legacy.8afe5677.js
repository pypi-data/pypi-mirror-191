(function(){"use strict";var e={7560:function(e,t,n){var r=n(4367),a=n(6198),i=(n(6992),n(8674),n(9601),n(7727),n(5666),n(7941),n(538)),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("trame-connect",{attrs:{"use-url":"","forward-errors":""}},[n("trame-template",{attrs:{"use-url":""}})],1)},o=[],c=function(){var e=this,t=e.$createElement;e._self._c;return e.ready?e._t("default"):e._e()},u=[],l=(n(8309),n(9600),n(2222),n(1249),n(1539),n(8783),n(3948),n(4747),n(9720),n(5200)),f=(n(6699),n(2023),n(285),n(1637),n(9714),n(4916),n(5306),n(8757),n(7807)),m=n(8923),h=n(8355),p=function(e){return{getArray:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.call("viewport.geometry.array.get",[t,n])},getViewState:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.call("viewport.geometry.view.get.state",[t,n])},addViewObserver:function(t){return e.call("viewport.geometry.view.observer.add",[t])},removeViewObserver:function(t){return e.call("viewport.geometry.view.observer.remove",[t])},subscribeToViewChange:function(t){return e.subscribe("viewport.geometry.view.subscription",t)},unsubscribe:function(t){return e.unsubscribe(t)}}},d=function(e){return{lifeCycleUpdate:function(t){return e.call("trame.lifecycle.update",[t])},sendError:function(t){return e.call("trame.error.client",[t])},getState:function(){return e.call("trame.state.get",[])},trigger:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.call("trame.trigger",[t,n,r])},updateState:function(t){return e.call("trame.state.update",[t])},subscribeToStateUpdate:function(t){return e.subscribe("trame.state.topic",t)},subscribeToActions:function(t){return e.subscribe("trame.actions.topic",t)},unsubscribe:function(t){return e.unsubscribe(t)}}},v={SyncView:p,Trame:d};h.ZP.setSmartConnectClass(m.ZP);var g={},y={"http:":"ws:","https:":"wss:","ws:":"ws:","wss:":"wss:"},b=["unsubscribe","subscribeToViewChange","subscribeToStateUpdate","subscribeToActions","subscribeToViewChange"];function w(e){var t=(0,r.Z)({},e);if(t.sessionURL){var n=t.sessionURL.toLowerCase(),a=window.location;if(n.includes("use_")){var i=new URL(n);i.protocol=y[a.protocol],n=i.toString()}for(var s={use_hostname:a.hostname,use_host:a.host},o=0,c=Object.entries(s);o<c.length;o++){var u=(0,l.Z)(c[o],2),m=u[0],h=u[1];n=n.replaceAll(m,h)}t.sessionURL=n}t.application=document.querySelector("html").dataset.appName||t.application;var p=document.querySelector("html").dataset.sessionManagerUrl||t.sessionManagerURL;return p&&(t.sessionManagerURL=p),t.useUrl?(0,r.Z)((0,r.Z)({},t),f.Z.extractURLParameters()):t}function x(){return h.ZP.newInstance({protocols:v,configDecorator:w,notBusyList:b})}function _(e){var t,n=null===(t=g[e])||void 0===t?void 0:t.client;if(!n){n=x();var r=[],a={type:"created",message:"Client connected..."};function i(t){g[e].status=t}g[e]={client:n,status:a,subscriptions:r},r.push(n.onConnectionError((function(e){var t;i({type:"Connection error",message:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.error})}))),r.push(n.onConnectionClose((function(e){var t;i({type:"Connection closed",message:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.error})})))}return n}function T(e){g[e]=null}function k(e){return g[e].status}var C={getClient:_,resetClient:T,getStatus:k,configDecorator:w},R=n(8932),S=n(6133),Z=n(2751),A=(n(2479),n(189),n(8862),n(7327),n(9274)),L=n(7117),O=(n(7042),n(2707),{});function $(e,t){return e.priority-t.priority}function E(e){O.addAttachement=e}var j=2e6,U={priority:0,decorate:function(e){return(0,a.Z)(regeneratorRuntime.mark((function t(){var n,r,a,i,s,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e){t.next=2;break}return t.abrupt("return",e);case 2:if(!e.constructor||e.constructor!==File){t.next=10;break}return n=e.name,r=e.lastModified,a=e.size,i=e.type,t.next=6,new Promise((function(t){var n=new FileReader;n.addEventListener("loadend",(function(){t(n.result)})),n.readAsArrayBuffer(e)}));case 6:if(s=t.sent,o=null,s.byteLength<j)o=O.addAttachement(s);else{o=[],c=0,u=j;while(c<s.byteLength)u>s.byteLength&&(u=s.byteLength),o.push(O.addAttachement(s.slice(c,u))),c=u,u+=j}return t.abrupt("return",{name:n,lastModified:r,size:a,type:i,content:o,_filter:["content"]});case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})))()}},V={priority:0,decorate:function(e){return(0,a.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e){t.next=2;break}return t.abrupt("return",e);case 2:if("string"!==typeof e){t.next=4;break}return t.abrupt("return",e);case 4:if(!(e.constructor&&e.constructor===FileList||e.length)){t.next=17;break}n=[],r=0;case 7:if(!(r<e.length)){t.next=16;break}return t.t0=n,t.next=11,U.decorate(e[r]);case 11:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 13:r++,t.next=7;break;case 16:return t.abrupt("return",n);case 17:return t.abrupt("return",e);case 18:case"end":return t.stop()}}),t)})))()}},I={priority:0,decorate:function(e){return(0,a.Z)(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e){t.next=2;break}return t.abrupt("return",e);case 2:if("string"!==typeof e){t.next=4;break}return t.abrupt("return",e);case 4:if(!e.constructor||e.constructor!==Object){t.next=21;break}n={},r=Object.keys(e),a=0;case 8:if(!(a<r.length)){t.next=20;break}return i=r[a],n[i]=e[i],t.next=13,V.decorate(n[i]);case 13:return n[i]=t.sent,t.next=16,U.decorate(n[i]);case 16:n[i]=t.sent;case 17:a++,t.next=8;break;case 20:return t.abrupt("return",n);case 21:return t.abrupt("return",e);case 22:case"end":return t.stop()}}),t)})))()}},N=[U,V,I];function P(e){N.push(e),N.sort($)}function B(e){return D.apply(this,arguments)}function D(){return D=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,r=0;case 2:if(!(r<N.length)){e.next=11;break}if(null!==n&&void 0!==n){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,N[r].decorate(n);case 7:n=e.sent;case 8:r++,e.next=2;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var H=n(9726),K=(n(3123),["type","key","keyCode","controlKey","altKey","shiftKey","position","spinX","spinY","pixelX","pixelY"]);function M(e){for(var t={},n=0;n<K.length;n++){var r=K[n];r in e&&(t[r]=e[r])}return t}var F={event:M};n(6977);function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(null===e)return null;for(var a=0;a<t.length;a++){var i=Array.isArray(n)?n[a]:n,s=t[a];if(!(e>i))return"".concat(e.toFixed(r)," ").concat(s);e/=i}return"".concat(e.toFixed(r)," ").concat(n[n.length-1])}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return q(e,["B","KB","MB","GB","TB","PB"],1024,t)}var J={number:q,bytes:z};function G(e,t){return X.apply(this,arguments)}function X(){return X=(0,a.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"application/octet-stream",e.next=3,Promise.resolve(n);case 3:a=e.sent,i=new Blob([a],{type:r}),s=URL.createObjectURL(i),o=document.createElement("a"),o.setAttribute("href",s),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout((function(){return URL.revokeObjectURL(s)}),1e3);case 13:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t,r=e.split("."),a=0;a<r.length;a++)n=n[r[a]];return n}function Q(e){try{return JSON.stringify(e),e}catch(s){}for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var a=n[r],i=e[a];if(Array.isArray(i))t[a]=i.map(Q);else try{JSON.stringify(i),t[a]=i}catch(s){continue}}return t}function W(e,t,n){var r={id:e},a=t?"".concat(t,": "):"";return Array.isArray(n)?(r.name="".concat(a,"[]"),n.length&&(r.children=[]),r):null!==n&&n?"function"===typeof n?(r.name="".concat(a,"function"),r):"object"===(0,H.Z)(n)?(r.name="".concat(a,"{}"),Object.keys(n).length&&(r.children=[]),r):(r.name="".concat(a).concat(n),r):(r.name="".concat(a).concat(n),r)}function ee(e,t,n,r){var a=W(t,n,r);e.push(a),a.children&&te(t,a.children,r)}function te(e,t,n){if(Array.isArray(n))for(var r=null,a=0;a<n.length;a++)ee(t,"".concat(e,"_").concat(a),r,n[a]);else for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s];ee(t,"".concat(e,"_").concat(s),o,n[o])}}function ne(e){var t=[];return te("",t,e),t}var re={download:G,get:Y,safe:Q,tree:ne,vtk:F,fmt:J};function ae(e){var t={tts:0};return e.forEach((function(e){t[e]=0})),new i.Z({data:t})}function ie(e,t){function n(e){for(var n=0;n<e.length;n++)t[e[n]]++}return e.$on("stateChange",n),function(){e.$off("stateChange",n)}}function se(e,t,n){var r={};return t.forEach((function(t){r[t]={get:function(){return n[t],e.state.get(t)},set:function(n){e.state.set(t,n)}}})),r}window.trame||(window.trame={}),window.trame.utils||(window.trame.utils=re);var oe={},ce={};function ue(e,t){return le.apply(this,arguments)}function le(){return le=(0,a.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=7;break}return e.next=4,n(t[r]);case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function fe(e,t){for(var n=[],r={},a=0;a<e.length;a++){var i=n,s=e[a];if(Array.isArray(s)){var o=s[1].serial;o&&(r[o]||(r[o]=[]),i=r[o]);var c=s,u=(0,l.Z)(c,1);s=u[0]}i.push(s)}for(var f=n.map(t),m=Object.values(r),h=0;h<m.length;h++)f.push(ue(m[h],t));return Promise.all(f)}function me(e,t){return he.apply(this,arguments)}function he(){return he=(0,a.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:[],a=function(e){return!r.includes(e)},!t.includes("trame__styles")){e.next=5;break}return e.next=5,fe(n.trame__styles.filter(a),A.j);case 5:if(!t.includes("trame__scripts")){e.next=8;break}return e.next=8,fe(n.trame__scripts.filter(a),A.ve);case 8:t.includes("trame__vue_use")&&n.trame__vue_use.forEach((function(e){var t=e,n={};if(Array.isArray(e)){var a=(0,l.Z)(e,2);t=a[0],n=a[1]}var s=re.get(t);s?ce[t]||r.includes(t)||(ce[t]=!0,s.default&&(s=s.default),console.info("Vue.use(".concat(t,", ").concat(JSON.stringify(n),") - ").concat(!!s," - install(").concat(!!s.install,")")),s.install?(i.Z.use(s,n),s.getOptions&&Object.assign(oe,s.getOptions())):i.Z.use({install:s},n)):console.error("Lookup error: Vue.use(".concat(t,", ").concat(JSON.stringify(n),")"))})),t.includes("trame__favicon")&&n.trame__favicon&&(document.querySelector("link[rel=icon]").href=n.trame__favicon),t.includes("trame__title")&&n.trame__title&&(document.title=n.trame__title);case 11:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}var pe=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,S.Z)(this,e),this.name="Default trame application",this.vueInstance=t,this.client=(null===t||void 0===t?void 0:t.client)||r,this.exclude=(null===t||void 0===t?void 0:t.exclude)||i,this.subscriptions=[],this.state={},this.keyTS={},this.ts=0,this.trameTemplateTS=0,this.trameTemplate={template:"<div>Too early for trame template</div>"},this.dirtyKeys=new Set,this.registerDecorator=P;var s=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,a,i,s,o,c,u,l,f,m,h,p,d,v,g,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=[],a=Object.keys(t),i=0;case 3:if(!(i<a.length)){e.next=24;break}if(o=!0,c=a[i],u=t[c],null===u||void 0===u||null===(s=u._filter)||void 0===s||!s.length){e.next=20;break}o=!1,l=n.state[c],f=Object.keys(u),m=0;case 12:if(o||!(m<f.length)){e.next=20;break}if(h=f[m],"_"!==h[0]){e.next=16;break}return e.abrupt("continue",17);case 16:void 0!==l&&l[h]===u[h]||(o=!0);case 17:m++,e.next=12;break;case 20:o&&(r.push(c),n.state[c]=u);case 21:i++,e.next=3;break;case 24:for(n.ts+=1,p=0,d=0;d<r.length;d++)v=r[d],void 0===n.keyTS[v]&&p++,n.keyTS[v]=n.ts;return e.next=29,me(r,n.state,n.exclude);case 29:p&&(n.updateTrameTemplate(),n.vueInstance&&n.vueInstance.$emit("trameTemplateChange",n.trameTemplateTS)),n.vueInstance&&(n.vueInstance.$emit("stateChange",r),n.vueInstance.$router&&null!==t&&void 0!==t&&null!==(g=t.trame__routes)&&void 0!==g&&g.length&&(y=n.vueInstance.$router,t.trame__routes.forEach((function(e){y.addRoute(e)}))));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();this.subscriptions.push(this.client.getRemote().Trame.subscribeToStateUpdate((function(e){var t=(0,l.Z)(e,1),n=t[0];return s(n)}))),this.client.getRemote().Trame.getState().then((function(e){var r=e.state,a=e.name;n.name=a,s(r),t&&(t.ready=!0)})),this._updateFromServer=s}return(0,Z.Z)(e,[{key:"updateTrameTemplate",value:function(){if(this.vueInstance){this.trameTemplateTS+=1;var e=Object.keys(this.state),t=ae(e),n=ie(this.vueInstance,t),i=se(this.vueInstance,e,t),s=0;this.trameTemplate={name:"TrameTemplateInternal",inject:["trame"],props:{templateName:{type:String,default:"main"}},components:{VRuntimeTemplate:L.Z},computed:(0,r.Z)((0,r.Z)({},i),{},{contentTemplate:function(){var e="trame__template_".concat(this.templateName);return this[e]||"<div>No state variable for ".concat(e," with the following state.<br><pre>").concat(JSON.stringify(this.trame.state.get(),null,2),"</pre></div>")},tts:function(){return t.tts},utils:function(){return re}}),watch:{contentTemplate:function(){setTimeout((function(){return t.tts+=1}),10)}},methods:{set:function(e,t){return this.trame.state.set(e,t)},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.trame.state.get(e)},setAll:function(e){return this.trame.state.update(e)},flushState:function(){var e;return(e=this.trame.state).flush.apply(e,arguments)},registerDecorator:function(){var e;return(e=this.trame.state).registerDecorator.apply(e,arguments)},trigger:function(e){var t=arguments,n=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var a,i,s,o,c,u,l,f,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:[],i=t.length>2&&void 0!==t[2]?t[2]:{},s=[],o={},!a){r.next=9;break}return c=a.map((function(e){return B(e)})),r.next=8,Promise.all(c);case 8:s=r.sent;case 9:if(!i){r.next=17;break}return u=[],l=[],Object.entries(i).forEach((function(e,t){u.push(e),l.push(B(t))})),r.next=15,Promise.all(l);case 15:for(f=r.sent,m=0;m<u.length;m++)o[u[m]]=f[m];case 17:return r.next=19,n.trame.client.getRemote().Trame.trigger(e,s,o);case 19:return r.abrupt("return",r.sent);case 20:case"end":return r.stop()}}),r)})))()},getRef:function(e){var t=this.$refs.trameTemplateRootRef;return t.$refs&&t.$refs[e]?t.$refs[e]:t.$children[0].$refs[e]},execAction:function(e){var t=e.ref,n=e.type,r=this.getRef(t);if(r&&"method"===n){var a=e.method,i=e.args;r[a].apply(r,(0,R.Z)(i))}if(r&&"property"===n){var s=e.property,o=e.value;r[s]=o}}},created:function(){var e=this;s++,this.onActions=function(t){for(var n=(0,l.Z)(t,1),r=n[0],a=0;a<r.length;a++)e.execAction(r[a])},this.clientSub=this.trame.client.getRemote().Trame.subscribeToActions(this.onActions)},beforeDestroy:function(){s--,0===s&&n(),this.trame.client.getRemote().Trame.unsubscribe(this.clientSub)},template:'<v-runtime-template ref="trameTemplateRootRef" :template="contentTemplate" />'}}}},{key:"delete",value:function(){while(this.subscriptions.length)this.client.getRemote().Trame.unsubscribe(this.subscriptions.pop())}},{key:"get",value:function(e){return void 0===e?this.state:this.state[e]}},{key:"getTimeStamp",value:function(e){return this.keyTS[e]||0}},{key:"set",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.state[t]!==n){e.next=2;break}return e.abrupt("return");case 2:return this.ts+=1,this.state[t]=n,this.keyTS[t]=this.ts,this.dirty(t),e.next=8,this.flush();case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.ts+=1,n=0,r=Object.entries(t);n<r.length;n++)a=(0,l.Z)(r[n],2),i=a[0],s=a[1],this.state[i]!==s&&(this.state[i]=s,this.keyTS[i]=this.ts,this.dirty(i));return e.next=4,this.flush();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"canDirty",value:function(e){return!this.state.trame__client_only.includes(e)}},{key:"dirty",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.canDirty(t)&&e.dirtyKeys.add(t),e.vueInstance&&e.vueInstance.$emit("stateChange",[t])}))}},{key:"flush",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,o,c=this,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=u.length,n=new Array(t),r=0;r<t;r++)n[r]=u[r];if(n.length&&n.forEach((function(e){Array.isArray(e)?c.dirty.apply(c,(0,R.Z)(e)):c.dirty(e)})),!this.dirtyKeys.size||this.client.isBusy()){e.next=14;break}return a=[],i=[],this.dirtyKeys.forEach((function(e){a.push(B(c.state[e])),i.push(e)})),this.dirtyKeys.clear(),e.next=9,Promise.all(a);case 9:return s=e.sent,o=i.map((function(e,t){return{key:e,value:s[t]}})),e.next=13,this.client.getRemote().Trame.updateState(o);case 13:this.dirtyKeys.size&&this.flush();case 14:this.vueInstance&&!this.vueInstance.connected&&this._updateFromServer(this.state);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),de={name:"TrameConnect",props:{name:{type:String,default:"TrameConnect"},config:{type:Object,default:function(){return{application:"trame"}}},exclude:{type:Array,default:function(){return[]}},useUrl:{type:Boolean,default:!1},forwardErrors:{type:Boolean,default:!1}},data:function(){return{ready:!1,connected:!1,busy:1,status:{type:"created",message:"Connecting..."}}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.connect();case 2:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.client.getRemote().Trame.lifeCycleUpdate("client_unmounted");while(this.subscriptions.length)this.subscriptions.pop().unsubscribe();this.state&&(this.state.delete(),this.state=null)},methods:{reportError:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something unexpected happened...",r="trame__template_main";this.useUrl&&f.Z.extractURLParameters().ui&&(r="trame__template_".concat(f.Z.extractURLParameters().ui)),null!==this&&void 0!==this&&null!==(e=this.client)&&void 0!==e&&null!==(t=e.getConfig())&&void 0!==t&&t.reconnect?this.state.set(r,'<trame-reconnect message="'.concat(n,'"/>')):this.state.set(r,'<trame-loading message="'.concat(n,'"/>'))},connect:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.connected){t.next=2;break}return t.abrupt("return");case 2:if(e.client){e.previousConfig=e.client.getConfig();while(e.subscriptions.length)e.subscriptions.pop().unsubscribe();e.state&&(e.state.delete(),e.state=null),C.resetClient(e.name)}if(e.subscriptions=[],e.client=C.getClient(e.name),e.subscriptions.push(e.client.onBusyChange((function(t){var n=!t!==!e.busy;e.busy=t,n&&e.state&&e.state.set("trame__busy",t),0===t&&e.state.flush(),n&&e.$emit("busyChange",t)}))),e.subscriptions.push(e.client.onConnectionError((function(t){var n,r;e.connected=!1,e.status={type:"Connection error",message:null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.error},e.reportError((null===t||void 0===t||null===(r=t.response)||void 0===r?void 0:r.error)||"Connection error"),e.$emit("statusChange",e.status)}))),e.subscriptions.push(e.client.onConnectionClose((function(t){var n,r;e.connected=!1,e.status={type:"Connection closed",message:null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.error},e.reportError((null===t||void 0===t||null===(r=t.response)||void 0===r?void 0:r.error)||"Connection closed"),e.$emit("statusChange",e.status)}))),!e.client.isConnected()){t.next=13;break}e.status=C.getStatus(e.name),e.$emit("statusChange",e.status),t.next=19;break;case 13:return n=e.previousConfig||C.configDecorator((0,r.Z)((0,r.Z)({},e.config),{},{useUrl:e.useUrl})),t.next=16,e.client.connect(n);case 16:e.lastConfig=e.client.getConfig(),E(e.client.getConnection().getSession().addAttachment),e.status={type:"Connected"};case 19:e.connected=e.client.isConnected(),e.busy=e.client.isBusy(),e.$emit("statusChange",e.status),e.connected&&(e.state=new pe(e)),e.client.getRemote().Trame.lifeCycleUpdate("client_connected"),window.addEventListener("beforeunload",(function(){return e.client.getRemote().Trame.lifeCycleUpdate("client_exited")})),e.forwardErrors&&(a=console.error,console.error=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];try{e.client.getRemote().Trame.sendError(n.join(" "))}catch(i){a(i)}finally{a.apply(void 0,n)}},window.addEventListener("error",(function(e){console.error("".concat(e.type,": ").concat(e.message))})));case 26:case"end":return t.stop()}}),t)})))()},trigger:function(e){var t=arguments,n=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var a,i,s,o,c,u,l,f,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:[],i=t.length>2&&void 0!==t[2]?t[2]:{},s=[],o={},!a){r.next=9;break}return c=a.map((function(e){return B(e)})),r.next=8,Promise.all(c);case 8:s=r.sent;case 9:if(!i){r.next=17;break}return u=[],l=[],Object.entries(i).forEach((function(e,t){u.push(e),l.push(B(t))})),r.next=15,Promise.all(l);case 15:for(f=r.sent,m=0;m<u.length;m++)o[u[m]]=f[m];case 17:return r.next=19,n.client.getRemote().Trame.trigger(e,s,o);case 19:return r.abrupt("return",r.sent);case 20:case"end":return r.stop()}}),r)})))()}},provide:function(){return{trame:this}}},ve=de,ge=n(1001),ye=(0,ge.Z)(ve,c,u,!1,null,null,null),be=ye.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("trame-template-internal",{key:e.trameTemplateTS,attrs:{templateName:e.tName}})},xe=[],_e={name:"TrameServerTemplate",inject:["trame"],props:{templateName:{type:String,default:"main"},urlKey:{type:String,default:"ui"},useUrl:{type:Boolean,default:!1}},data:function(){return{trameTemplateTS:0}},computed:{tName:function(){return this.useUrl&&f.Z.extractURLParameters()[this.urlKey]?f.Z.extractURLParameters()[this.urlKey]:this.templateName}},created:function(){var e=this;this.onNewTemplate=function(){e.$options.components.trameTemplateInternal=e.trame.state.trameTemplate,e.trameTemplateTS=e.trame.state.trameTemplateTS},this.trame.$on("trameTemplateChange",this.onNewTemplate),this.onNewTemplate()},beforeDestroy:function(){this.trame.$off("trameTemplateChange",this.onNewTemplate)}},Te=_e,ke=(0,ge.Z)(Te,we,xe,!1,null,null,null),Ce=ke.exports,Re={name:"App",components:{TrameConnect:be,TrameServerTemplate:Ce}},Se=Re,Ze=(0,ge.Z)(Se,s,o,!1,null,null,null),Ae=Ze.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("div",{class:e.$style.loader}),n("div",{class:e.$style.message},[e._v(" "+e._s(e.message)+" ")])])},Oe=[],$e={name:"Loading",props:{message:{type:String,default:"Loading..."}}},Ee=$e,je={container:"style_container_VCsHx",loader:"style_loader_CNsNi",spin:"style_spin_BAaPb",message:"style_message_rmggO"};function Ue(e){this["$style"]=je.locals||je}var Ve=(0,ge.Z)(Ee,Le,Oe,!1,Ue,null,null),Ie=Ve.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("div",{class:e.$style.center},[n("div",{class:e.$style.button,on:{click:e.reconnect}},[n("svg",{staticStyle:{width:"24px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M4,1C2.89,1 2,1.89 2,3V7C2,8.11 2.89,9 4,9H1V11H13V9H10C11.11,9 12,8.11 12,7V3C12,1.89 11.11,1 10,1H4M4,3H10V7H4V3M14,13C12.89,13 12,13.89 12,15V19C12,20.11 12.89,21 14,21H11V23H23V21H20C21.11,21 22,20.11 22,19V15C22,13.89 21.11,13 20,13H14M3.88,13.46L2.46,14.88L4.59,17L2.46,19.12L3.88,20.54L6,18.41L8.12,20.54L9.54,19.12L7.41,17L9.54,14.88L8.12,13.46L6,15.59L3.88,13.46M14,15H20V19H14V15Z"}})]),e._v(" "+e._s(e.message)+" ")])])])},Pe=[],Be=(n(9653),{name:"Reconnect",props:{message:{type:String,default:"Click to reconnect..."},maxRetry:{type:Number,default:10},delay:{type:Number,default:500}},methods:{reconnect:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.trame.connect();case 2:case"end":return t.stop()}}),t)})))()},resetRetry:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}},mounted:function(){var e,t,n,r=this;this.retryCount=0;var a=null===(e=this.trame)||void 0===e||null===(t=e.client)||void 0===t||null===(n=t.getConfig())||void 0===n?void 0:n.reconnect;a&&(console.log("reconnect",a),"auto"===a&&(this.interval=setInterval((function(){r.retryCount++<r.maxRetry?r.reconnect():r.resetRetry()}),this.delay)))},beforeDestroy:function(){this.resetRetry()},inject:["trame"]}),De=Be,He={container:"style_container_n4xKQ",center:"style_center_xzh58",button:"style_button_kGhdk"};function Ke(e){this["$style"]=He.locals||He}var Me=(0,ge.Z)(De,Ne,Pe,!1,Ke,null,null),Fe=Me.exports,qe=function(){var e=this,t=e.$createElement;e._self._c;return e._t("default",null,null,e.state)},ze=[];function Je(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;a++)e[n[a]]=null;return e}function Ge(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return function(n){for(var a=e.state,i=new Set(n),s=0;s<r.length;s++){var o=r[s];i.has(o)&&(t[o]=a.get(o))}}}var Xe={inject:["trame"],name:"TrameStateResolver",props:{names:{type:Array,default:function(){return[]}}},data:function(){return Je.apply(void 0,(0,R.Z)(this.names))},computed:{state:function(){for(var e=this,t={trame:this.trame,set:function(){var t;return(t=e.trame.state).set.apply(t,arguments)}},n=0;n<this.names.length;n++){var r=this.names[n];t[r]=this[r]}return t}},created:function(){this.onStateChange=Ge.apply(void 0,[this.trame,this].concat((0,R.Z)(this.names))),this.trame.$on("stateChange",this.onStateChange),this.onStateChange(this.names)},beforeDestroy:function(){this.trame.$off("stateChange",this.onStateChange)},provide:function(){return{state:this}}},Ye=Xe,Qe=(0,ge.Z)(Ye,qe,ze,!1,null,null,null),We=Qe.exports,et=1;function tt(){return"trame_style_elem_".concat(et++)}var nt,rt,at={name:"TrameStyle",props:{css:{type:String,default:""}},watch:{css:function(e){this.updateStyle(e)}},created:function(){this.elemId=tt(),this.updateStyle(this.css)},beforeDestroy:function(){this.removeStyle()},methods:{updateStyle:function(e){var t=document.querySelector("#".concat(this.elemId));e?(t||(t=document.createElement("style"),t.id=this.elemId,document.head.appendChild(t)),t.innerHTML=e):this.removeStyle()},removeStyle:function(){var e=document.querySelector("#".concat(this.elemId));e&&e.parentNode.removeChild(e)}}},it=at,st=(0,ge.Z)(it,nt,rt,!1,null,null,null),ot=st.exports,ct={name:"TrameExec",props:["event"],methods:{exec:function(e){void 0===e?this.$emit("exec",this.event):this.$emit("exec",e)}}},ut={TrameApp:Ae,TrameConnect:be,TrameLoading:Ie,TrameReconnect:Fe,TrameTemplate:Ce,TrameStateResolver:We,TrameStyle:ot,TrameExec:ct},lt={install:function(e){Object.keys(ut).forEach((function(t){e.component(t,ut[t])}))}},ft="TrameConnect";function mt(){var e=C.getStatus(ft),t=document.querySelector(".trame__message");t&&(t.innerHTML=e.message||e.type)}function ht(e){return pt.apply(this,arguments)}function pt(){return pt=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.Vue=t,t.use(lt),n=C.getClient(ft),e.prev=3,e.next=6,n.connect(C.configDecorator({application:"trame",useUrl:!0}));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](3),mt(),e.abrupt("return");case 12:return n.onConnectionError(mt),n.onConnectionClose(mt),E(n.getConnection().getSession().addAttachment),e.next=17,n.getRemote().Trame.getState();case 17:return a=e.sent,i=a.state,e.next=21,me(Object.keys(i),i);case 21:new t((0,r.Z)((0,r.Z)({},oe),{},{render:function(e){return e(Ae)}})).$mount("#app");case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),pt.apply(this,arguments)}ht(i.Z)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,i){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],i=e[l][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self["webpackChunktrame_components"]=self["webpackChunktrame_components"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(7560)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.8afe5677.js.map