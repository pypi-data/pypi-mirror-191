"use strict";(self.webpackChunkgetsshpubkey=self.webpackChunkgetsshpubkey||[]).push([[763],{763:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var n,s=o(279),a=o(598),r=o(510),l=o(271),c=o.n(l),i=o(886),u=o(258);!function(e){e.createNew="getsshpubkey:getssh"}(n||(n={}));const h="Copy SSH",b="Copy RSA",g={id:"getsshpubkey:plugin",autoStart:!0,optional:[a.ISettingRegistry,s.ILauncher],activate:(e,t,o)=>{console.log("JupyterLab extension getsshpubkey is activated!");const{commands:s}=e,a=n.createNew;s.addCommand(a,{label:e=>(e.isPalette,"SSH Key"),caption:"SSH Key",icon:e=>{},execute:async e=>{(async function(e="",t={}){const o=u.ServerConnection.makeSettings(),n=i.URLExt.join(o.baseUrl,"getsshpubkey",e);let s;try{s=await u.ServerConnection.makeRequest(n,t,o)}catch(e){throw new u.ServerConnection.NetworkError(e)}let a=await s.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",s)}if(!s.ok)throw new u.ServerConnection.ResponseError(s,a.message||a);return a})("get_ssh_pub_key",{method:"GET"}).then((e=>{return(0,r.showDialog)({title:"Public SSH key",body:(t=e.ssh,o=e.rsa,c().createElement("div",{sshkey:t,rsakey:o},c().createElement("h4",null,"SSH key, for use in Github"),"See ",c().createElement("a",{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account",target:"_blank",style:{color:"grey"}},"adding ssh key"),".",c().createElement("br"),c().createElement("br"),t,c().createElement("br"),c().createElement("br"),c().createElement("h4",null,"RSA key, for use in Snowflake"),`Run \`call PRODUCTION.PUBLIC.SET_RSA_PUBLIC_KEY('${o.split("\n").slice(1,-2)}')\` from a Snowflake worksheet.`)),focusNodeSelector:"input",buttons:[r.Dialog.cancelButton({label:"Cancel"}),r.Dialog.okButton({label:h}),r.Dialog.okButton({label:b})]}).then((t=>{if(console.log(t),!t.button.accept)return null;if(t.button.label===h)r.Clipboard.copyToSystem(e.ssh);else{if(t.button.label!==b)return null;r.Clipboard.copyToSystem(e.rsa)}return(0,r.showDialog)({body:"Copied!"})}));var t,o})).catch((e=>{console.error(`The getsshpubkey server extension appears to be missing.\n${e}`)}))}}),o&&o.add({command:a,category:"Other",rank:2}),t&&t.load(g.id).then((e=>{console.log("getsshpubkey settings loaded:",e.composite)})).catch((e=>{console.error("Failed to load settings for getsshpubkey.",e)}))}},y=g}}]);