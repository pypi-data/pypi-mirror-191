"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2980],{58144:function(e,n,r){var t=r(59499),i=r(26537),s=r(23256),o=r(43894),a=r(85893);function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.isOpen,r=e.onClose,t=e.onConfirm,l=e.title,u=e.message,d=e.cancelButtonText,h=e.cancelButtonThemingProps,p=e.continueButtonText,f=e.continueButtonThemingProps,x=e.isLoading,v=e.returnFocusOnClose,g=e.isCentered;return(0,a.jsxs)(i.u_,{isOpen:n,onClose:r,size:"lg",returnFocusOnClose:v||!0,isCentered:g,children:[(0,a.jsx)(i.ZA,{}),(0,a.jsxs)(i.hz,{textAlign:"center",p:2,"data-testid":"confirmation-modal",children:[l?(0,a.jsx)(i.xB,{fontWeight:"medium",children:l}):null,u?(0,a.jsx)(i.fe,{children:u}):null,(0,a.jsx)(i.mz,{children:(0,a.jsxs)(s.MI,{columns:2,width:"100%",children:[(0,a.jsx)(o.zx,c(c({variant:"outline",mr:3,onClick:r,"data-testid":"cancel-btn",isDisabled:x},h),{},{children:d||"Cancel"})),(0,a.jsx)(o.zx,c(c({colorScheme:"primary",onClick:t,"data-testid":"continue-btn",isLoading:x},f),{},{children:p||"Continue"}))]})})]})]})}},79992:function(e,n,r){r.d(n,{Z:function(){return o}});var t,i=r(85657);r(67294);!function(e){e.IDENTITY_UNVERIFIED="identity_unverified",e.REQUIRES_INPUT="requires_input",e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.IN_PROCESSING="in_processing",e.COMPLETE="complete",e.PAUSED="paused",e.CANCELED="canceled",e.ERROR="error"}(t||(t={}));var s=r(85893),o=function(e){var n=e.daysLeft,r=e.includeText,o=e.status;if(!n||o===t.COMPLETE||o===t.CANCELED||o===t.DENIED||o===t.IDENTITY_UNVERIFIED)return null;var a="";switch(!0){case n>=10:a="green.500";break;case n<10&&n>4:a="orange.500";break;case n<5:a="red.400"}var l=r?"".concat(n," days left"):n;return(0,s.jsx)(i.Vp,{backgroundColor:a,color:"white",children:l})}},3357:function(e,n,r){var t=r(85893);n.Z=function(e){var n=e.data,r=e.revealPII?n:n.replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:r})}},26012:function(e,n,r){var t=r(82350),i=(r(67294),r(85893));n.Z=function(e){var n=e.revealPII,r=e.onChange;return(0,i.jsx)(t.r,{colorScheme:"secondary",isChecked:n,onChange:function(e){return r(e.target.checked)}})}},68293:function(e,n,r){var t=r(23256),i=r(43894),s=r(85893);n.Z=function(e){var n=e.page,r=e.size,o=e.total,a=e.handleNextPage,l=e.handlePreviousPage,c=(n-1)*r+1,u=Math.min(o,n*r);return(0,s.jsxs)(t.kC,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(t.xv,{fontSize:"xs",color:"gray.600",children:o>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(c)?0:c," to"," ",Number.isNaN(u)?0:u," of"," ",Number.isNaN(o)?0:o," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.zx,{disabled:n<=1,onClick:l,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(i.zx,{disabled:n*r>=o,onClick:a,size:"sm",children:"Next"})]})]})}},9234:function(e,n,r){var t=r(23256),i=r(85893),s={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};n.Z=function(e){var n=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:s[n].bg,width:107,lineHeight:"18px",textAlign:"center",children:s[n].label})}},13720:function(e,n,r){var t=r(85657),i=r(23256),s=r(44188),o=(r(67294),r(10061)),a=r(85893);n.Z=function(e){var n=e.rules,r=Array.from(new Set(n.filter((function(e){return Object.values(s.U).includes(e.action_type)})).map((function(e){return(0,o.kC)(e.action_type)})))).map((function(e){return(0,a.jsx)(t.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,a.jsx)(i.xu,{children:r})}},44068:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(16835),i=r(27812),s=r(23256),o=r(37991),a=r(77601),l=r(43894),c=r(48591),u=r(67294),d=r(12036),h=r(85893),p=function(e){var n=e.defaultValues,r=e.items,a=e.onSelection,c=(0,u.useState)(r),p=c[0],f=c[1];return(0,h.jsxs)(o.qy,{lineHeight:"1rem",p:"0",children:[(0,h.jsxs)(s.kC,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,h.jsx)(l.zx,{onClick:function(){f(r),a(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,h.jsx)(s.LZ,{}),(0,h.jsx)(l.zx,{backgroundColor:"primary.800",color:"white",onClick:function(){a(p)},size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,h.jsx)(s.xu,{maxH:"360px",overflow:"auto",children:(0,h.jsx)(d.cO,{colorScheme:"purple",defaultValue:n,onChange:function(e){var n=new Map(p);n.forEach((function(e,r){n.set(r,!1)})),e.forEach((function(e){n.set(e,!0)})),f(n)},children:(0,i.Z)(r).sort().map((function(e){var n=(0,t.Z)(e,1)[0];return(0,h.jsx)(o.sN,{paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,h.jsx)(d.XZ,{"aria-label":n,isChecked:r.get(n),spacing:".5rem",value:n,width:"100%",children:(0,h.jsx)(s.xv,{fontSize:"0.75rem",children:n})})},n)}))})})]})},f=function(e){var n=e.closeOnSelect,r=void 0!==n&&n,d=e.list,f=e.onChange,x=e.selectedList,v=e.label,g=e.tooltipDisabled,j=void 0!==g&&g,b=e.tooltipPlacement,m=void 0===b?"auto":b,y=e.width,C=new Map(d),O=(0,u.useState)(!1),S=O[0],w=O[1],P=function(){w(!1)},E=function(){return j?v:x.size>0?(0,i.Z)(x.keys()).sort().join(", "):v};return(0,h.jsx)(s.xu,{children:(0,h.jsxs)(o.v2,{closeOnSelect:r,isLazy:!0,onClose:P,onOpen:function(){w(!0)},children:[(0,h.jsx)(a.u,{fontSize:".75rem",hasArrow:!0,"aria-label":"",label:E(),lineHeight:"1.25rem",isDisabled:j||!(x.size>0),placement:m,children:(0,h.jsxs)(o.j2,{"aria-label":E(),as:l.zx,fontWeight:"normal",rightIcon:(0,h.jsx)(c.mC,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},children:[!j&&(0,h.jsx)(s.xv,{display:"inline-block",isTruncated:!0,width:y,children:E()}),j&&(0,h.jsxs)(s.Ug,{children:[(0,h.jsx)(s.xv,{children:E()}),x.size>0&&(0,h.jsx)(s.xv,{color:"complimentary.500",children:x.size})]})]})}),S?(0,h.jsx)(p,{defaultValues:(0,i.Z)(x.keys()),items:C,onSelection:function(e){var n=new Map((0,i.Z)(e).filter((function(e){return!0===(0,t.Z)(e,2)[1]})));f((0,i.Z)(n.keys())),P()}}):null]})})}},70783:function(e,n,r){r.d(n,{HK:function(){return s},VY:function(){return t.V}});var t=r(63719),i=r(65698),s=function(){var e=(0,t.V)().errorAlert;return{handleError:function(n){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?r=n.data.detail:(0,i.tB)(n)&&(r=n.data.detail[0].msg),e(r)}}};r(67294)},63719:function(e,n,r){r.d(n,{V:function(){return d}});var t=r(59499),i=r(13450),s=r(26707),o=r(23256),a=r(93225),l=r(85893);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(n,r,t){var i=u(u({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,l.jsxs)(s.bZ,{alignItems:"normal",status:"error",children:[(0,l.jsx)(s.zM,{}),(0,l.jsxs)(o.xu,{children:[r&&(0,l.jsx)(s.Cd,{children:r}),(0,l.jsx)(s.X,{children:n})]}),(0,l.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(n,r,t){var i=u(u({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,l.jsxs)(s.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,l.jsx)(s.zM,{}),(0,l.jsxs)(o.xu,{children:[r&&(0,l.jsx)(s.Cd,{children:r}),(0,l.jsx)(s.X,{children:n})]}),(0,l.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},2980:function(e,n,r){r.d(n,{Z:function(){return te}});var t=r(23256),i=r(5152),s=r.n(i),o=r(67294),a=r(70783),l=r(70918),c=r(85893),u=r(16835),d=r(27812),h=r(59499),p=r(50029),f=r(87794),x=r.n(f),v=r(13450),g=r(30268),j=r(48591),b=r(43894),m=r(44068),y=r(26012),C=r(14416),O=r(37161),S=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]);function w(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?w(Object(r),!0).forEach((function(n){(0,h.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var E,k=function(e){var n=e.revealPII,r=e.setRevealPII,i=function(e){var n=(0,C.useSelector)(l.dp),r=(0,C.useSelector)(O.rK),t=(0,C.useDispatch)(),i=(0,v.pm)(),s=(0,o.useCallback)((function(e){var n=[];e.forEach((function(e){S.forEach((function(r,t){t===e&&n.push(r)}))})),t((0,l.CI)(n))}),[t]),a=function(){var e=(0,p.Z)(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.py)(P(P({},n),{},{token:r}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t=e.t0 instanceof Error?e.t0.message:"Unknown error occurred";case 8:t&&i({description:"".concat(t),duration:5e3,status:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){var n=new Map;return S.forEach((function(r,t){var i=!1;e.includes(r)&&(i=!0),n.set(t,i)})),n},h=(0,o.useMemo)((function(){return c(n.status||[])}),[n.status]),f=new Map((0,d.Z)(h).filter((function(e){return!0===(0,u.Z)(e,2)[1]})));return P(P({handleSearchChange:function(e){return t((0,l.Nl)(e.target.value))},handleStatusChange:s,handleFromChange:function(e){return t((0,l.su)(null===e||void 0===e?void 0:e.target.value))},handleToChange:function(e){return t((0,l.Ue)(null===e||void 0===e?void 0:e.target.value))},handleClearAllFilters:function(){e(!1),t((0,l.Mk)())},handleDownloadClick:a,loadStatusList:c},n),{},{selectedStatusList:f,statusList:h})}(r),s=i.handleSearchChange,a=i.handleStatusChange,h=i.handleFromChange,f=i.handleToChange,w=i.handleClearAllFilters,E=i.handleDownloadClick,k=i.id,D=i.from,R=i.selectedStatusList,I=i.statusList,z=i.to;return(0,c.jsxs)(t.Kq,{direction:"row",spacing:4,mb:6,children:[(0,c.jsx)(m.Z,{label:"Select Status",list:I,selectedList:R,width:"144px",onChange:a,tooltipPlacement:"top"}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Z8,{pointerEvents:"none",children:(0,c.jsx)(j.PT,{color:"gray.300",w:"17px",h:"17px"})}),(0,c.jsx)(g.II,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search",size:"sm",borderRadius:"md",value:k,name:"search",onChange:s})]}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Ui,{borderRadius:"md",children:"From"}),(0,c.jsx)(g.II,{type:"date",name:"From",value:D,max:z||void 0,onChange:h,borderRadius:"md"})]}),(0,c.jsxs)(g.BZ,{size:"sm",children:[(0,c.jsx)(g.Ui,{borderRadius:"md",children:"To"}),(0,c.jsx)(g.II,{type:"date",borderRadius:"md",name:"To",value:z,min:D||void 0,onChange:f})]}),(0,c.jsxs)(t.kC,{flexShrink:0,alignItems:"center",children:[(0,c.jsx)(t.xv,{fontSize:"xs",mr:2,size:"sm",children:"Reveal PII"}),(0,c.jsx)(y.Z,{revealPII:n,onChange:r})]}),(0,c.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(j.$I,{}),size:"sm",onClick:E,children:"Download"}),(0,c.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(j.LG,{width:"17px"}),size:"sm",onClick:w,children:"Clear all filters"})]})},D=r(78522),R=r(12036),I=r(97142),z=r(68293),T=r(97375),Z=r(26707),A=r(37991),q=r(86589),L=r(79992),_=r(13720),M=r(10061),N=r(11163),F=r(58144),B=function(e){var n=e.isOpen,r=e.handleMenuClose,t=e.handleApproveRequest,i=e.isLoading,s=(0,o.useCallback)((function(){t().then((function(){r()}))}),[t,r]);return(0,c.jsx)(F.Z,{isOpen:n,onClose:r,onConfirm:s,message:"Are you sure you want to approve this privacy request?",continueButtonText:"Confirm",continueButtonThemingProps:{variant:"solid"},isLoading:i,returnFocusOnClose:!1,isCentered:!0})},U=r(53700),V=r(3357),W=r(9234),H=r(1521),X=r(26537),G=r(96016),K=r(82175),Y=r(74231),J={denialReason:""},Q=function(e){var n=e.isOpen,r=e.handleMenuClose,t=e.handleDenyRequest,i=(0,o.useCallback)((function(e,n){var i=n.setSubmitting;t(e.denialReason).then((function(){i(!1),r()}))}),[t,r]);return(0,c.jsxs)(X.u_,{isOpen:n,onClose:r,isCentered:!0,returnFocusOnClose:!1,children:[(0,c.jsx)(X.ZA,{}),(0,c.jsx)(X.hz,{width:"100%",maxWidth:"456px",children:(0,c.jsx)(K.J9,{initialValues:J,validationSchema:Y.Ry({denialReason:Y.Z_().required().label("Reason for denial")}),onSubmit:i,children:function(e){var n=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,c.jsxs)(K.l0,{children:[(0,c.jsx)(X.xB,{children:"Privacy Request Denial"}),(0,c.jsx)(X.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,c.jsx)(X.fe,{children:(0,c.jsx)(G.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,c.jsxs)(X.mz,{children:[(0,c.jsx)(b.zx,{size:"sm",width:"100%",maxWidth:"198px",colorScheme:"gray.200",mr:3,disabled:n,onClick:r,children:"Close"}),(0,c.jsx)(b.zx,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!i,isLoading:n,children:"Confirm"})]})]})}})})]})},$=function(e){var n=e.isChecked,r=e.onCheckChange,i=e.request,s=e.revealPII,a=function(e){var n=(0,U.hz)().flags.navV2,r=(0,v.pm)(),t=(0,o.useRef)(null),i=(0,o.useState)(!1),s=i[0],a=i[1],d=(0,o.useState)(!1),h=d[0],p=d[1],f=(0,o.useState)(!1),x=f[0],g=f[1],j=(0,o.useState)(!1),b=j[0],m=j[1],y=(0,o.useState)(!1),C=y[0],O=y[1],S=(0,l.RW)(),w=(0,u.Z)(S,2),P=w[0],E=w[1],k=(0,l.F1)(),D=(0,u.Z)(k,2),R=D[0],I=D[1],z=(0,T.VP)(e.id).onCopy,A=function(){p(!1),a(!1),g(!1)},q=(0,N.useRouter)();return{approveRequestResult:E,denyRequestResult:I,hovered:s,focused:h,menuOpen:x,denyModalOpen:b,approveModalOpen:C,handleDenyModalOpen:function(){return m(!0)},handleDenyModalClose:function(){m(!1),A()},handleApproveModalOpen:function(){return O(!0)},handleApproveModalClose:function(){O(!1),A()},handleMenuClose:function(){return g(!1)},handleMenuOpen:function(){return g(!0)},handleMouseEnter:function(){return a(!0)},handleMouseLeave:function(){return a(!1)},handleFocus:function(){return p(!0)},handleBlur:function(){return p(!1)},handleIdCopy:function(){z(),r({title:"Request ID copied",duration:5e3,render:function(){return(0,c.jsx)(Z.bZ,{bg:"gray.600",borderRadius:"6px",display:"flex",children:(0,c.jsx)(Z.Cd,{color:"white",children:"Request ID copied"})})},containerStyle:{minWidth:"0px"}})},handleApproveRequest:function(){return P(e)},handleDenyRequest:function(n){return R({id:e.id,reason:n})},hoverButtonRef:t,shiftFocusToHoverMenu:function(){t.current&&t.current.focus()},handleViewDetails:function(){var r="/".concat(n?"privacy-requests":"subject-request","/").concat(e.id);q.push(r)}}}(i),d=a.hovered,h=a.handleMenuOpen,p=a.handleMenuClose,f=a.handleMouseEnter,x=a.handleMouseLeave,g=a.handleApproveRequest,m=a.handleDenyRequest,y=a.handleIdCopy,C=a.menuOpen,O=a.approveRequestResult,S=a.denyRequestResult,w=a.hoverButtonRef,P=a.denyModalOpen,E=a.handleDenyModalClose,k=a.handleDenyModalOpen,I=a.approveModalOpen,z=a.handleApproveModalClose,F=a.handleApproveModalOpen,X=a.shiftFocusToHoverMenu,G=a.handleFocus,K=a.handleBlur,Y=a.focused,J=a.handleViewDetails,$=d||C||Y;return(0,c.jsxs)(D.Tr,{_hover:{bg:"gray.50"},bg:$?"gray.50":"white",onMouseEnter:f,onMouseLeave:x,height:"36px",children:[(0,c.jsx)(D.Td,{px:0,children:(0,c.jsx)(R.XZ,{"aria-label":"Select request",isChecked:!!n,isDisabled:"error"!==i.status,onChange:function(e){return r(i.id,e.target.checked)}})}),(0,c.jsx)(D.Td,{pl:0,py:1,children:(0,c.jsx)(W.Z,{status:i.status})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(L.Z,{daysLeft:i.days_left,includeText:!1,status:i.status})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(_.Z,{rules:i.policy.rules})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,c.jsx)(V.Z,{data:i.identity&&(i.identity.email||i.identity.phone_number)||"",revealPII:s})})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,M.p6)(i.created_at)})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{fontSize:"xs",children:(0,c.jsx)(V.Z,{data:i.reviewer?i.reviewer.username:"",revealPII:s})})}),(0,c.jsx)(D.Td,{py:1,children:(0,c.jsx)(t.xv,{isTruncated:!0,fontSize:"xs",maxWidth:"87px",children:i.id})}),(0,c.jsxs)(D.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:[(0,c.jsx)(b.zx,{size:"xs",variant:"ghost",mr:2.5,onFocus:X,tabIndex:$?-1:0,children:(0,c.jsx)(j.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsxs)(b.hE,{isAttached:!0,variant:"outline",position:"absolute",right:2.5,top:"50%",transform:"translate(1px, -50%)",opacity:$?1:0,pointerEvents:$?"auto":"none",onFocus:G,onBlur:K,shadow:"base",borderRadius:"md",backgroundColor:"white",children:["error"===i.status&&(0,c.jsx)(H.Z,{buttonProps:{mr:"-px",size:"xs"},handleBlur:K,subjectRequest:i}),"pending"===i.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b.zx,{size:"xs",mr:"-px",bg:"white",onClick:function(){F(),K()},isDisabled:O.isLoading||S.isLoading,_hover:{bg:"gray.100"},ref:w,children:"Approve"}),(0,c.jsx)(b.zx,{size:"xs",mr:"-px",bg:"white",onClick:k,isDisabled:O.isLoading||S.isLoading,_hover:{bg:"gray.100"},children:"Deny"}),(0,c.jsx)(Q,{isOpen:P,handleMenuClose:E,handleDenyRequest:m}),(0,c.jsx)(B,{isOpen:I,handleMenuClose:z,handleApproveRequest:g,isLoading:O.isLoading})]}),(0,c.jsxs)(A.v2,{onOpen:h,onClose:p,children:[(0,c.jsx)(A.j2,{as:b.zx,size:"xs",bg:"white",ref:"pending"!==i.status?w:null,children:(0,c.jsx)(j.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsx)(q.h_,{children:(0,c.jsxs)(A.qy,{shadow:"xl",children:[(0,c.jsx)(A.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:y,children:(0,c.jsx)(t.xv,{fontSize:"sm",children:"Copy Request ID"})}),(0,c.jsx)(A.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:J,children:(0,c.jsx)(t.xv,{fontSize:"sm",children:"View Details"})})]})})]})]})]})]},i.id)};!function(e){e.ASC="asc",e.DESC="desc",e.UNSELECTED="unselected"}(E||(E={}));var ee=function(e){var n=e.sortField,r=e.isLoading,i=function(e){var n=e.sortField,r=e.isLoading,t=(0,C.useSelector)(l.dp),i=(0,C.useDispatch)(),s=(0,o.useState)(E.UNSELECTED),a=s[0],c=s[1],u=(0,o.useState)(!1),d=u[0],h=u[1];return(0,o.useEffect)((function(){r||h(!1)}),[r]),(0,o.useEffect)((function(){void 0===t.sort_direction&&c(E.UNSELECTED)}),[t]),{handleButtonClick:(0,o.useCallback)((function(){switch(h(!0),i((0,l.PU)(n)),a){case E.UNSELECTED:i((0,l.iX)(E.ASC)),c(E.ASC);break;case E.ASC:i((0,l.iX)(E.DESC)),c(E.DESC);break;case E.DESC:i((0,l.p2)()),c(E.UNSELECTED)}}),[a,c,i,n]),buttonState:a,wasButtonJustClicked:d}}({sortField:n,isLoading:r}),s=i.buttonState,a=i.handleButtonClick,u=i.wasButtonJustClicked,d=null;switch(s){case E.ASC:d=(0,c.jsx)(j.HK,{up:!0});break;case E.DESC:d=(0,c.jsx)(j.HK,{up:!1});break;case E.UNSELECTED:default:d=(0,c.jsx)(j.HK,{})}return(0,c.jsx)(t.kC,{paddingLeft:"3px",children:(0,c.jsx)(b.hU,{variant:"ghost","aria-label":"Sort requests",icon:d,isLoading:r&&u,onClick:a})})},ne=function(e){var n=e.revealPII,r=(0,I.T)(),i=(0,I.C)(l.dp),s=(0,I.C)(l.fe),a=s.checkAll,u=s.errorRequests,h=(0,l.QA)(i),p=h.data,f=h.isFetching,x=p||{items:[],total:0},v=x.items,g=x.total,j=(0,o.useCallback)((function(){return v.filter((function(e){return"error"===e.status})).map((function(e){return e.id}))}),[v]),b=function(e,n){var t;t=n?[].concat((0,d.Z)(u),[e]):u.filter((function(n){return n!==e})),r((0,l.uT)({checkAll:n&&a,errorRequests:t}))};return(0,o.useEffect)((function(){var e;f&&null!==(e=i.status)&&void 0!==e&&e.includes("error")&&r((0,l.uT)({checkAll:!1,errorRequests:[]}))}),[r,i.status,f]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(D.iA,{size:"sm",children:[(0,c.jsx)(D.hr,{children:(0,c.jsxs)(D.Tr,{children:[(0,c.jsx)(D.Th,{px:0,children:(0,c.jsx)(R.XZ,{"aria-label":"Select all",isChecked:a,isDisabled:!v.some((function(e){return"error"===e.status})),onChange:function(){var e=!a;r((0,l.uT)({checkAll:e,errorRequests:e?j():[]}))}})}),(0,c.jsx)(D.Th,{pl:0,children:"Status"}),(0,c.jsx)(D.Th,{children:(0,c.jsxs)(t.kC,{alignItems:"center",children:["Days Left"," ",(0,c.jsx)(ee,{sortField:"due_date",isLoading:f})]})}),(0,c.jsx)(D.Th,{children:"Request Type"}),(0,c.jsx)(D.Th,{children:"Subject Identity"}),(0,c.jsx)(D.Th,{children:"Time Received"}),(0,c.jsx)(D.Th,{children:"Reviewed By"}),(0,c.jsx)(D.Th,{children:"Request ID"}),(0,c.jsx)(D.Th,{})]})}),(0,c.jsx)(D.p3,{children:v.map((function(e){return(0,c.jsx)($,{isChecked:u.includes(e.id),onCheckChange:b,request:e,revealPII:n},e.id)}))})]}),(0,c.jsx)(z.Z,{page:i.page,size:i.size,total:g,handleNextPage:function(){r((0,l.YA)(i.page+1))},handlePreviousPage:function(){r((0,l.YA)(i.page-1))}})]})},re=s()((function(){return Promise.all([r.e(6894),r.e(7036)]).then(r.bind(r,67036))}),{loading:function(){return(0,c.jsx)("div",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[67036]}}}),te=function(){var e=function(){var e=(0,a.VY)().errorAlert,n=(0,o.useState)(!1),r=n[0],i=n[1],s=(0,o.useState)({count:0,total:0}),u=s[0],d=s[1],h=(0,o.useState)(!0),p=h[0],f=h[1],x=(0,l.tE)().data,v=(0,l.QA)({status:["error"]},{pollingInterval:15e3,skip:p}).data;return(0,o.useEffect)((function(){f(!(x&&x.notify_after_failures>0))}),[x]),(0,o.useEffect)((function(){var e=(null===v||void 0===v?void 0:v.total)||0;e>=((null===x||void 0===x?void 0:x.notify_after_failures)||0)&&e>u.total?(d({count:e-u.total,total:e}),i(!0)):i(!1)}),[null===v||void 0===v?void 0:v.total,null===x||void 0===x?void 0:x.notify_after_failures,u.total]),{processing:function(){r&&e((0,c.jsxs)(t.xu,{children:["DSR automation has failed for"," ",(0,c.jsx)(t.xv,{as:"span",fontWeight:"semibold",children:u.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}(),n=e.processing,r=(0,o.useState)(!1),i=r[0],s=r[1];return(0,o.useEffect)((function(){n()}),[n]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.kC,{children:[(0,c.jsx)(t.X6,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,c.jsx)(t.LZ,{}),(0,c.jsx)(re,{})]}),(0,c.jsx)(k,{revealPII:i,setRevealPII:s}),(0,c.jsx)(ne,{revealPII:i})]})}},1521:function(e,n,r){var t=r(59499),i=r(50029),s=r(16835),o=r(87794),a=r.n(o),l=r(37178),c=r(23256),u=r(43894),d=r(67294),h=r(97142),p=r(65698),f=r(70783),x=r(70918),v=r(85893);function g(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function j(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?g(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var b=(0,l.Gp)((function(e,n){var r=e.buttonProps,t=e.handleBlur,o=e.subjectRequest,l=(0,h.T)(),g=(0,d.useState)(!1),b=g[0],m=g[1],y=(0,f.VY)(),C=y.errorAlert,O=y.successAlert,S=(0,h.C)(x.fe).errorRequests,w=(0,x.JD)(),P=(0,s.Z)(w,1)[0],E=(0,x.Fq)(),k=(0,s.Z)(E,1)[0],D=function(){var e=(0,i.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,P(S);case 3:"error"in(n=e.sent)?(l((0,x.uT)({checkAll:!1,errorRequests:[]})),C((0,p.e$)(n.error),"DSR batch automation has failed due to the following:",{duration:null})):(n.data.failed.length>0&&C((0,v.jsxs)(c.xu,{children:["DSR automation has failed for"," ",(0,v.jsx)(c.xv,{as:"span",fontWeight:"semibold",children:n.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),n.data.succeeded.length>0&&O("Privacy request(s) are now being reprocessed.")),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.next=5,k(o);case 5:"error"in(r=e.sent)?C((0,p.e$)(r.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):O("Privacy request is now being reprocessed."),m(!1),t&&t(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(u.zx,j(j({},r),{},{isDisabled:b,isLoading:b,loadingText:"Reprocessing",onClick:o?R:D,ref:n,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));n.Z=b},44188:function(e,n,r){var t,i;r.d(n,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);