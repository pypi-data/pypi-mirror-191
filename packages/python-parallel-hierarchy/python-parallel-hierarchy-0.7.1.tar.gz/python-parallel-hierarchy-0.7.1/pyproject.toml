[build-system]
    requires = [
        "setuptools>=65",
        "setuptools-scm[toml]>=6.2",
        "wheel",
    ]
    build-backend = "setuptools.build_meta"

[project]
    name = "python-parallel-hierarchy"
    dynamic = ["version"]
    description = """A utility for creating a parallel class hierarchy based on a primary set of classes."""
    readme = "README_pypi.rst"
    requires-python = ">=3.9"
    license = {file = "LICENSE"}
    authors = [
        {name = "JoÃ«l Larose", email = "joel.larose@gmail.com"}
    ]
    keywords = ["metaprogramming", "class hierarchy", "don't repeat yourself", "DRY"]
    classifiers = [
        # "Development Status :: 2 - Pre-Alpha",
        # "Development Status :: 3 - Alpha",
        "Development Status :: 4 - Beta",
        # "Development Status :: 5 - Production/Stable",
        "License :: OSI Approved :: Apache Software License",
        "Operating System :: OS Independent",
        "Programming Language :: Python :: 3",
        "Programming Language :: Python :: 3.9",
        "Programming Language :: Python :: 3.10",
        "Topic :: Software Development :: Code Generators",
        "Topic :: Software Development :: Libraries",
        "Topic :: Utilities",
        "Typing :: Typed",
        "Intended Audience :: Developers"
    ]
    dependencies = [
    ]

[project.urls]
    "Repository" = "https://gitlab.com/joel.larose/python-parallel-hierarchy"
#    "Documentation" = "https://budosystems.readthedocs.io/"
    "Issue Tracker" = "https://gitlab.com/joel.larose/python-parallel-hierarchy/-/issues"

[project.optional-dependencies]
    test = [
        "pytest",
        "pytest-cov",
    ]
    docs = [
        "Sphinx",
        "sphinx-git",
        "sphinxcontrib-plantuml",
    ]
    typecheck = [
        "mypy",
    ]
    lintcheck = [
        "pylint",
        "pylint-venv",
        "pylint-pytest",
    ]
    all = [
        "python-parallel-hierarchy[test,docs,typecheck,lintcheck]"
    ]

[tool.setuptools]
    zip-safe = false
    packages = {find = {where = ["src"]}}

[tool.setuptools_scm]
    write_to = "src/parallel_hierarchy/_version.py"

[tool.pytest.ini_options]
    testpaths = ["tests"]

[tool.coverage.run]
    branch = true

    source = ["src", "tests"]

[tool.coverage.report]
    exclude_lines = [
        "pragma: no cover",
        "def __repr__",
        "if MYPY",
        "if TYPE_CHECKING",
        "if self.debug:",
        "if settings.DEBUG",
        "if 0:",
        "if __name__ == .__main__.:",
        "raise AssertionError",
        "raise NotImplementedError",
        "class .*\bProtocol\\):",
        "@(abc\\.)?abstractmethod",
    ]

    partial_branches = [
        "pragma: no branch",
        "if MYPY",
        "if TYPE_CHECKING",
        "if self.debug:",
        "if settings.DEBUG",
    ]
