"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4777],{52313:function(e,n,t){var r=t(59499),i=t(4730),o=t(81144),s=t(85893),a=["data","border"];function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.data,t=e.border,r=void 0===t?"partial":t,c=(0,i.Z)(e,a);return(0,s.jsxs)(o.mQ,l(l({colorScheme:"complimentary"},c),{},{children:[(0,s.jsx)(o.td,{width:"partial"===r?"max-content":void 0,children:n.map((function(e){return(0,s.jsx)(o.OK,{"data-testid":"tab-".concat(e.label),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontWeight:"500",color:"gray.500",isDisabled:e.isDisabled||!1,children:e.label},e.label)}))}),(0,s.jsx)(o.nP,{children:n.map((function(e){return(0,s.jsx)(o.x4,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label)}))})]}))}},70783:function(e,n,t){t.d(n,{HK:function(){return o},VY:function(){return r.V}});var r=t(63719),i=t(65698),o=function(){var e=(0,r.V)().errorAlert;return{handleError:function(n){var t="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?t=n.data.detail:(0,i.tB)(n)&&(t=n.data.detail[0].msg),e(t)}}};t(67294)},63719:function(e,n,t){t.d(n,{V:function(){return d}});var r=t(59499),i=t(13450),o=t(26707),s=t(23256),a=t(93225),c=t(85893);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(n,t,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(s.xu,{children:[t&&(0,c.jsx)(o.Cd,{children:t}),(0,c.jsx)(o.X,{children:n})]}),(0,c.jsx)(a.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)},successAlert:function(n,t,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(s.xu,{children:[t&&(0,c.jsx)(o.Cd,{children:t}),(0,c.jsx)(o.X,{children:n})]}),(0,c.jsx)(a.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)}}}},85130:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(16835),i=t(27812),o=t(30004),s=(t(67294),t(93843)),a=t(36292),c=function(e){return void 0!==e.connection_type},l=t(85893),u=function(e){var n=e.data;return(0,l.jsx)(o.Ee,{boxSize:"32px",objectFit:"cover",src:function(){var e;return(e=c(n)?(0,i.Z)(a.iW).find((function(e){var t,i,o=(0,r.Z)(e,1)[0];return n.connection_type.toString()!==s.Rj.SAAS&&n.connection_type.toString()===o||n.connection_type.toString()===s.Rj.SAAS&&(null===(t=n.saas_config)||void 0===t||null===(i=t.type)||void 0===i?void 0:i.toString())===o.toString()})):(0,i.Z)(a.iW).find((function(e){return(0,r.Z)(e,1)[0].toLowerCase()===n.toLowerCase()})))?a.Ny+e[1]:a.VD}(),fallbackSrc:a.VD,alt:c(n)?n.name:n})}},66752:function(e,n,t){t(67294);var r=t(84247),i=t(85893);n.Z=function(e){var n=e.children;return(0,i.jsx)(r.Z,{title:"Connections",children:n})}},9613:function(e,n,t){var r=t(23256),i=t(20440),o=t(62254),s=t(41664),a=t.n(s),c=t(67294),l=t(97142),u=t(85893);n.Z=function(e){var n=e.steps,t=(0,l.C)(o.ZZ),s=t.connectionOption,d=t.step,p=(0,c.useCallback)((function(e){var n="";switch(e.stepId){case 2:case 3:n=e.label.replace("{identifier}",s.human_readable);break;default:n=e.label}return n}),[s]);return(0,u.jsx)(r.xu,{mb:"32px",children:(0,u.jsx)(i.aG,{fontSize:"sm",fontWeight:"medium",children:n.map((function(e){return(0,u.jsxs)(i.gN,{children:[e!==d&&(0,u.jsx)(i.At,{as:a(),href:e.href,children:p(e)}),e===d&&(0,u.jsx)(i.At,{isCurrentPage:!0,color:"complimentary.500",_hover:{textDecoration:"none"},children:p(e)})]},e.stepId)}))})})}},78860:function(e,n,t){var r=t(27812),i=t(23256),o=t(62254),s=(t(67294),t(97142)),a=t(85893);n.Z=function(e){var n=e.menuOptions,t=void 0===n?[]:n,c=e.onChange,l=e.selectedItem,u=(0,s.C)(o.ZZ).connection,d=null!==u&&void 0!==u&&u.key?(0,r.Z)(t):(0,r.Z)(t).splice(0,1);return(0,a.jsxs)(i.xu,{w:"234px",children:[(0,a.jsx)(i.X6,{as:"h6",color:"gray.700",fontWeight:"600",size:"xs",children:"Configuration settings"}),(0,a.jsx)(i.aV,{color:"gray.700",display:"flex",flexDirection:"column",fontSize:"sm",h:"64px",mt:"4px",w:"178px",children:d.map((function(e){return(0,a.jsx)(i.HC,{color:l===e?"complimentary.500":void 0,onClick:function(){return c(e)},p:"10px 12px 10px 12px",userSelect:"none",_hover:{bg:"gray.100",cursor:"pointer"},children:e},e)}))})]})}},93860:function(e,n,t){t.d(n,{s:function(){return X}});var r=t(23256),i=t(44359),o=t(55901),s=t(62254),a=t(67294),c=t(97142),l=t(93843),u=t(50029),d=t(16835),p=t(87794),f=t.n(p),h=t(70783),x=t(63719),m=t(24302),g=t(14416),v=t(59499),j=t(89816),y=t(27634),b=t(30268),k=t(26894),C=t(77601),w=t(48591),O=t(86211),S=t(43894),_=t(82175),Z=t(85893);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,v.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I="#/definitions/FidesopsDatasetReference",D=function(e){var n=e.data,t=e.defaultValues,i=e.isSubmitting,o=void 0!==i&&i,p=e.onSaveClick,x=e.onTestConnectionClick,g=(0,a.useRef)(!1),v=(0,h.HK)().handleError,z=(0,c.C)(s.ZZ),D=z.connection,E=z.connectionOption,R=(0,m.h2)(),A=(0,d.Z)(R,2),F=A[0],V=A[1],L=function(e){var n;return"undefined"!==typeof e&&""!==e||(n="Connection Identifier is required"),e&&(0,j.kE)(e)&&(n="Connection Identifier must be an alphanumeric value"),n},W=function(e,n,t){var r;("undefined"!==typeof n&&""!==n||(r="".concat(e," is required")),t===I)&&(n.includes(".")?n.split(".").length<3&&(r="Dataset reference must include at least three parts"):r="Dataset reference must be dot delimited");return r},q=function(e,n){return(0,Z.jsx)(y.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:e,minWidth:"150px",children:n})},T=function(e){var n;if((null===(n=e.allOf)||void 0===n?void 0:n[0].$ref)===I)return"Enter dataset.collection.field"},N=function(){var e=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(D.key).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),v(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){return g.current=!0,V.isSuccess&&x(V),function(){g.current=!1}}),[x,V]),(0,Z.jsx)(_.J9,{enableReinitialize:!0,initialValues:function(){var e;null!==D&&void 0!==D&&D.key?(t.name=D.name,t.description=D.description,t.instance_key=D.connection_type===l.Rj.SAAS?null===(e=D.saas_config)||void 0===e?void 0:e.fides_key:D.key,Object.entries(n.properties).forEach((function(e){t[e[0]]=e[1].default?e[1].default:"integer"===e[1].type?0:""}))):Object.entries(n.properties).forEach((function(e){t[e[0]]=e[1].default?e[1].default:"integer"===e[1].type?0:""}));return t}(),onSubmit:function(e,t){var r=P({},e);Object.keys(n.properties).forEach((function(t){var i;if((null===(i=n.properties[t].allOf)||void 0===i?void 0:i[0].$ref)===I){var o=e[t].split(".");r[t]={dataset:o.shift(),field:o.join("."),direction:"from"}}})),p(r,t)},validateOnBlur:!1,validateOnChange:!1,children:function(e){return(0,Z.jsx)(_.l0,{noValidate:!0,children:(0,Z.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,Z.jsx)(_.gN,{id:"name",name:"name",validate:function(e){return W("Name",e)},children:function(n){var t=n.field;return(0,Z.jsxs)(y.NI,{display:"flex",isRequired:!0,isInvalid:e.errors.name&&e.touched.name,children:[q("name","Name"),(0,Z.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:[(0,Z.jsx)(b.II,P(P({},t),{},{autoComplete:"off",autoFocus:!0,color:"gray.700",placeholder:"Enter a friendly name for your new ".concat(E.human_readable," connection"),size:"sm","data-testid":"input-name"})),(0,Z.jsx)(y.J1,{children:e.errors.name})]}),(0,Z.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,Z.jsx)(w.IT,{marginLeft:"8px"})})]})}}),(0,Z.jsx)(_.gN,{id:"description",name:"description",children:function(e){var n=e.field;return(0,Z.jsxs)(y.NI,{display:"flex",children:[q("description","Description"),(0,Z.jsx)(O.g,P(P({},n),{},{color:"gray.700",placeholder:"Enter a description for your new ".concat(E.human_readable," connection"),resize:"none",size:"sm",value:n.value||""})),(0,Z.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:"hidden",children:(0,Z.jsx)(w.IT,{marginLeft:"8px"})})]})}}),(0,Z.jsx)(_.gN,{id:"instance_key",name:"instance_key",validate:L,children:function(n){var t=n.field;return(0,Z.jsxs)(y.NI,{display:"flex",isRequired:!0,isInvalid:e.errors.instance_key&&e.touched.instance_key,children:[q("instance_key","Connection Identifier"),(0,Z.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:[(0,Z.jsx)(b.II,P(P({},t),{},{autoComplete:"off",color:"gray.700",isDisabled:!(null===D||void 0===D||!D.key),placeholder:"A unique identifier for your new ".concat(E.human_readable," connection"),size:"sm"})),(0,Z.jsx)(y.J1,{children:e.errors.instance_key})]}),(0,Z.jsx)(C.u,{"aria-label":"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",hasArrow:!0,label:"The fides_key will allow fidesops to associate dataset field references appropriately. Must be a unique alphanumeric value with no spaces (underscores allowed) to represent this connection.",placement:"right-start",openDelay:500,children:(0,Z.jsx)(r.kC,{alignItems:"center",h:"32px",children:(0,Z.jsx)(w.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}}),Object.entries(n.properties).map((function(e){var t=(0,d.Z)(e,2);return function(e,t){var i;return(0,Z.jsx)(_.gN,{id:e,name:e,validate:!!(null!==(i=n.required)&&void 0!==i&&i.includes(e)||"integer"===t.type)&&function(e){var n;return W(t.title,e,null===(n=t.allOf)||void 0===n?void 0:n[0].$ref)},children:function(i){var o,s=i.field,a=i.form;return(0,Z.jsxs)(y.NI,{display:"flex",isRequired:null===(o=n.required)||void 0===o?void 0:o.includes(e),isInvalid:a.errors[e]&&a.touched[e],children:[q(e,t.title),(0,Z.jsxs)(r.gC,{align:"flex-start",w:"inherit",children:["integer"!==t.type&&(0,Z.jsx)(b.II,P(P({},s),{},{placeholder:T(t),autoComplete:"off",color:"gray.700",size:"sm"})),"integer"===t.type&&(0,Z.jsxs)(k.Y2,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,Z.jsx)(k.zu,P(P({},s),{},{autoComplete:"off"})),(0,Z.jsxs)(k.Fi,{children:[(0,Z.jsx)(k.WQ,{}),(0,Z.jsx)(k.Y_,{})]})]}),(0,Z.jsx)(y.J1,{children:a.errors[e]})]}),(0,Z.jsx)(C.u,{"aria-label":t.description,hasArrow:!0,label:t.description,placement:"right-start",openDelay:500,children:(0,Z.jsx)(r.kC,{alignItems:"center",h:"32px",visibility:t.description?"visible":"hidden",children:(0,Z.jsx)(w.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})})]})}},e)}(t[0],t[1])})),(0,Z.jsxs)(S.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,Z.jsx)(S.zx,{colorScheme:"gray.700",isDisabled:!(null!==D&&void 0!==D&&D.key),isLoading:V.isLoading||V.isFetching,loadingText:"Testing",onClick:N,variant:"outline",children:"Test connection"}),(0,Z.jsx)(S.zx,{bg:"primary.800",color:"white",isDisabled:o,isLoading:o,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})]})})}})},E=t(5404),R=function(e){var n=e.data,t=e.onConnectionCreated,i=e.onTestConnectionClick,o=(0,g.useDispatch)(),l=(0,x.V)(),p=l.errorAlert,v=l.successAlert,j=(0,h.HK)().handleError,y=(0,a.useState)(!1),b=y[0],k=y[1],C=(0,c.C)(s.ZZ),w=C.connection,O=C.connectionOption,S=(0,m.pH)(),_=(0,d.Z)(S,1)[0],z=(0,m.Du)(),P=(0,d.Z)(z,1)[0],I=function(){var e=(0,u.Z)(f().mark((function e(r,i){var a,c,l,u,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),c={access:"write",connection_type:null===O||void 0===O?void 0:O.identifier,description:r.description,disabled:!1,key:(0,E.E)(r.instance_key),name:r.name},e.next=5,_(c).unwrap();case 5:if(l=e.sent,!((null===(a=l.failed)||void 0===a?void 0:a.length)>0)){e.next=10;break}p(l.failed[0].message),e.next=16;break;case 10:return u={connection_key:l.succeeded[0].key,secrets:{}},Object.entries(n.properties).forEach((function(e){u.secrets[e[0]]=r[e[0]]})),e.next=14,P(u).unwrap();case 14:"failed"===(d=e.sent).test_status?p((0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("b",{children:"Message:"})," ",d.msg,(0,Z.jsx)("br",{}),(0,Z.jsx)("b",{children:"Failure Reason:"})," ",d.failure_reason]})):(o((0,s.lm)(l.succeeded[0])),v("Connector successfully ".concat(null!==w&&void 0!==w&&w.key?"updated":"added","!")),null!==w&&void 0!==w&&w.key||!t||t());case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),j(e.t0);case 21:return e.prev=21,k(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",O.human_readable," environment by providing credential information below. Once you have saved your connector credentials, you can review what data is included when processing a privacy request in your Dataset configuration."]}),(0,Z.jsx)(D,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:b,onSaveClick:I,onTestConnectionClick:i})]})},A=t(11163),F=t(18459),V=t(74231),L=t(70452),W=t(16410),q=function(e){var n=e.defaultValues,t=e.isSubmitting,i=void 0!==t&&t,o=e.onSaveClick,a=(0,A.useRouter)(),l=(0,c.C)(s.ZZ),u=l.connection,d=l.connectionOption;return(0,Z.jsx)(_.J9,{initialValues:(null!==u&&void 0!==u&&u.key&&(n.name=u.name,n.description=u.description),n),onSubmit:function(e,n){o(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:V.Ry().shape({name:V.Z_().required("Name is required")}),children:(0,Z.jsx)(_.l0,{noValidate:!0,children:(0,Z.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,Z.jsx)(L.Z,{autoFocus:!0,disabled:!(null===u||void 0===u||!u.key),isRequired:!0,label:"Name",name:"name",placeholder:"Enter a friendly name for your new ".concat(d.human_readable," connection")}),(0,Z.jsx)(L.Z,{label:"Description",name:"description",placeholder:"Enter a description for your new ".concat(d.human_readable," connection"),type:"textarea"}),(0,Z.jsx)(W.h,{isSubmitting:i,onCancelClick:function(){a.push(F.JR)}})]})})})},T=function(e){var n=e.onConnectionCreated,t=(0,g.useDispatch)(),i=(0,x.V)(),o=i.errorAlert,l=i.successAlert,p=(0,h.HK)().handleError,v=(0,a.useState)(!1),j=v[0],y=v[1],b=(0,c.C)(s.ZZ),k=b.connection,C=b.connectionOption,w=(0,m.pH)(),O=(0,d.Z)(w,1)[0],S=function(){var e=(0,u.Z)(f().mark((function e(r,i){var a,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),c={access:"write",connection_type:null===C||void 0===C?void 0:C.identifier,description:r.description,disabled:!1,name:r.name,key:null===k||void 0===k?void 0:k.key},e.next=5,O(c).unwrap();case 5:u=e.sent,(null===(a=u.failed)||void 0===a?void 0:a.length)>0?o(u.failed[0].message):(t((0,s.lm)(u.succeeded[0])),l("Connector successfully ".concat(null!==k&&void 0!==k&&k.key?"updated":"added","!")),null!==k&&void 0!==k&&k.key||!n||n()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p(e.t0);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(r.gC,{align:"stretch",gap:"16px",children:[(0,Z.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",children:["To begin setting up your new ",C.human_readable," ","connector you must first assign a name to the connector and a description.",(0,Z.jsx)("br",{}),(0,Z.jsx)("br",{}),"Once you have completed this section you can then progress onto"," ",(0,Z.jsx)(r.xv,{display:"inline-block",fontWeight:"700",children:"DSR customization"})," ","using the menu on the left hand side."]}),(0,Z.jsx)(q,{defaultValues:{description:"",name:""},isSubmitting:j,onSaveClick:S})]})},N=function(e){var n=e.data,t=e.onConnectionCreated,i=e.onTestConnectionClick,o=(0,g.useDispatch)(),l=(0,x.V)(),p=l.errorAlert,v=l.successAlert,j=(0,h.HK)().handleError,y=(0,a.useState)(!1),b=y[0],k=y[1],C=(0,c.C)(s.ZZ),w=C.connection,O=C.connectionOption,S=(0,m.NG)(),_=(0,d.Z)(S,1)[0],z=(0,m.pH)(),P=(0,d.Z)(z,1)[0],I=(0,m.Du)(),R=(0,d.Z)(I,1)[0],A=function(){var e=(0,u.Z)(f().mark((function e(r,i){var a,c,l,u,d,h,x;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k(!0),!w){e.next=20;break}return c={access:"write",connection_type:w.connection_type,description:r.description,disabled:!1,key:w.key,name:r.name},e.next=6,P(c).unwrap();case 6:if(l=e.sent,!((null===(a=l.failed)||void 0===a?void 0:a.length)>0)){e.next=11;break}p(l.failed[0].message),e.next=18;break;case 11:return o((0,s.lm)(l.succeeded[0])),u={connection_key:w.key,secrets:{}},Object.entries(n.properties).forEach((function(e){u.secrets[e[0]]=r[e[0]]})),e.next=16,R(u).unwrap();case 16:"failed"===(d=e.sent).test_status?p((0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("b",{children:"Message:"})," ",d.msg,(0,Z.jsx)("br",{}),(0,Z.jsx)("b",{children:"Failure Reason:"})," ",d.failure_reason]})):v("Connector successfully updated!");case 18:e.next=28;break;case 20:return h={description:r.description,name:r.name,instance_key:(0,E.E)(r.instance_key),saas_connector_type:O.identifier,secrets:{}},Object.entries(n.properties).forEach((function(e){h.secrets[e[0]]=r[e[0]]})),e.next=24,_(h).unwrap();case 24:x=e.sent,o((0,s.lm)(x.connection)),v("Connector successfully added!"),null===t||void 0===t||t();case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),j(e.t0);case 33:return e.prev=33,k(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[0,30,33,36]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(r.xu,{color:"gray.700",fontSize:"14px",h:"80px",children:["Connect to your ",O.human_readable," environment by providing credential information below. Once you have saved your connector credentials, you can review what data is included when processing a privacy request in your Dataset configuration."]}),(0,Z.jsx)(D,{data:n,defaultValues:{description:"",instance_key:"",name:""},isSubmitting:b,onSaveClick:A,onTestConnectionClick:i})]})},M=t(85657),H=t(10061),Y=function(e){var n,t,i=e.response,o=(0,c.C)(s.ZZ).connectionOption;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.iz,{color:"gray.100"}),(0,Z.jsxs)(r.gC,{align:"flex-start",mt:"16px",children:["succeeded"===(null===(n=i.data)||void 0===n?void 0:n.test_status)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(r.Ug,{children:[(0,Z.jsxs)(r.X6,{as:"h5",color:"gray.700",size:"xs",children:["Successfully connected to ",o.human_readable]}),(0,Z.jsx)(M.Vp,{colorScheme:"green",size:"sm",variant:"solid",children:"Success"})]}),(0,Z.jsx)(r.xv,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,H.p6)(i.fulfilledTimeStamp)}),(0,Z.jsx)(r.xu,{bg:"green.100",border:"1px solid",borderColor:"green.300",color:"green.700",mt:"16px",borderRadius:"6px",children:(0,Z.jsxs)(r.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,Z.jsx)(w.St,{}),(0,Z.jsxs)(r.xu,{children:[(0,Z.jsx)(r.X6,{as:"h5",color:"green.500",fontWeight:"semibold",size:"xs",children:"Success message:"}),(0,Z.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.msg})]})]})})]}),"failed"===(null===(t=i.data)||void 0===t?void 0:t.test_status)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(r.Ug,{children:[(0,Z.jsxs)(r.X6,{as:"h5",color:"gray.700",size:"xs",children:["Output error to ",o.human_readable]}),(0,Z.jsx)(M.Vp,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,Z.jsx)(r.xv,{color:"gray.500",fontSize:"sm",mt:"12px !important",children:(0,H.p6)(i.fulfilledTimeStamp)}),(0,Z.jsx)(r.xu,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,Z.jsxs)(r.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,Z.jsx)(w.f9,{}),(0,Z.jsxs)(r.xu,{children:[(0,Z.jsx)(r.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,Z.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.failure_reason}),(0,Z.jsx)(r.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:i.data.msg})]})]})})]})]})]})},X=function(e){var n=e.onConnectionCreated,t=(0,a.useRef)(!1),u=(0,a.useState)(!0),d=u[0],p=u[1],f=(0,c.C)(s.ZZ).connectionOption,h=(0,s.n3)(f.identifier,{skip:d}),x=h.data,m=h.isFetching,g=h.isLoading,v=h.isSuccess,j=(0,a.useState)(),y=j[0],b=j[1],k=function(e){b(e)},C=(0,a.useCallback)((function(){switch(null===f||void 0===f?void 0:f.type){case l.Zi.DATABASE:if(v&&x)return(0,Z.jsx)(R,{data:x,onConnectionCreated:n,onTestConnectionClick:k});break;case l.Zi.MANUAL:return(0,Z.jsx)(T,{onConnectionCreated:n});case l.Zi.SAAS:if(v&&x)return(0,Z.jsx)(N,{data:x,onConnectionCreated:n,onTestConnectionClick:k})}}),[null===f||void 0===f?void 0:f.type,x,v,n]);return(0,a.useEffect)((function(){return t.current=!0,(null===f||void 0===f?void 0:f.type)!==l.Zi.MANUAL&&p(!1),function(){t.current=!1}}),[null===f||void 0===f?void 0:f.type]),(0,Z.jsxs)(r.kC,{gap:"97px",children:[(0,Z.jsxs)(r.gC,{w:"579px",gap:"16px",align:"stretch",children:[(m||g)&&(0,Z.jsx)(r.M5,{children:(0,Z.jsx)(i.$,{})}),C()]}),y&&(0,Z.jsxs)(o.Rg,{in:!0,children:[" ",(0,Z.jsx)(r.xu,{mt:"16px",maxW:"528px",w:"fit-content",children:(0,Z.jsx)(Y,{response:y})})]})]})}},95693:function(e,n,t){t.d(n,{Z:function(){return q}});var r=t(50029),i=t(16835),o=t(59499),s=t(4730),a=t(87794),c=t.n(a),l=t(23256),u=t(44359),d=t(92698),p=t(43894),f=t(70783),h=t(62254),x=t(24302),m=t(11163),g=t(67294),v=t(18459),j=t(97142),y=t(65698),b=t(71206),k=t(53959),C=t(97375),w=t(55901),O=t(85657),S=t(48591),_=t(63719),Z=t(1272),z=t(56661),P=t(5152),I=t.n(P),D=t(53700),E=t(85893),R=I()((function(){return t.e(9604).then(t.bind(t,19604)).then((function(e){return e.default}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[19604]}}}),A=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,o=e.onSubmit,s=e.onCancel,a=e.disabled,c=(0,g.useRef)(null),u=(0,_.V)().errorAlert,d=t.length>0?Z.ZP.dump(t):void 0,f=(0,g.useState)(void 0),h=f[0],x=f[1],m=(0,g.useState)(!1),v=m[0],j=m[1],y=(0,g.useState)(!d),P=y[0],I=y[1],A=(0,D.hz)().flags.navV2,F=(0,C.qY)(),V=(0,b.NR)().data,L=(0,g.useState)([]),W=L[0],q=L[1],T=function(){var e=c.current.getValue(),n=Z.ZP.load(e,{json:!0});o(n),q([])};return(0,E.jsxs)(l.kC,{gap:"97px",children:[(0,E.jsxs)(l.gC,{align:"stretch",w:"800px",children:[(0,E.jsx)(R,{defaultLanguage:"yaml",defaultValue:d,height:A?"calc(100vh - 526px":"calc(100vh - 394px)",onChange:function(e){try{j(!0),function(e){Z.ZP.load(e,{json:!0}),x(void 0)}(e),I(!(e&&""!==e.trim()))}catch(n){!function(e){return(0,z.Ln)({name:"string"},e)&&"YAMLException"===e.name}(n)?u("Could not parse the supplied YAML"):x(n)}},onMount:function(e,n){c.current=e,c.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0},readOnly:a},theme:"light"}),(0,E.jsxs)(p.hE,{size:"sm",children:[s?(0,E.jsx)(p.zx,{onClick:s,children:"Cancel"}):null,(0,E.jsx)(p.zx,{colorScheme:"primary",isDisabled:a||P||!!h||i,isLoading:i,loadingText:"Saving",onClick:function(){if(V&&V.length){var e=c.current.getValue(),n=V.filter((function(n){return e.includes("fides_key: ".concat(n.fides_key,"\n"))})).map((function(e){return e.fides_key}));if(q(n),n.length)return void F.onOpen()}T()},type:"submit","data-testid":"save-yaml-btn",width:"fit-content",children:"Save"})]})]}),v&&(P||h)&&(0,E.jsx)(w.Rg,{in:!0,children:(0,E.jsxs)(l.xu,{w:"fit-content",children:[(0,E.jsx)(l.iz,{color:"gray.100"}),(0,E.jsxs)(l.Ug,{mt:"16px",children:[(0,E.jsx)(l.X6,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,E.jsx)(O.Vp,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,E.jsx)(l.xu,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,E.jsxs)(l.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,E.jsx)(S.f9,{}),P&&(0,E.jsxs)(l.xu,{children:[(0,E.jsx)(l.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,E.jsx)(l.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"YAML dataset is required"})]}),h&&(0,E.jsxs)(l.xu,{children:[(0,E.jsx)(l.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,E.jsx)(l.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:h.message}),(0,E.jsx)(l.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:h.reason}),(0,E.jsxs)(l.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,E.jsx)("b",{children:h.mark.line}),", Col"," ",(0,E.jsx)("b",{children:h.mark.column}),", Pos"," ",(0,E.jsx)("b",{children:h.mark.position})]})]})]})})]})}),(0,E.jsx)(k.cV,{isOpen:F.isOpen,onClose:F.onClose,onConfirm:function(){T(),F.onClose()},title:"Overwrite dataset",message:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(l.xv,{children:["You are about to overwrite the dataset",W.length>1?"s":""," ",W.map((function(e,n){var t=n===W.length-1;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:e}),t?".":", "]})}))]}),(0,E.jsx)(l.xv,{children:"Are you sure you would like to continue?"})]})})]})},F=["children"];function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W=function(e){var n=e.children,t=(0,s.Z)(e,F);return(0,E.jsx)(l.xv,L(L({color:"gray.700",fontSize:"14px"},t),{},{children:n}))},q=function(){var e=(0,m.useRouter)(),n=(0,f.VY)(),t=n.errorAlert,o=n.successAlert,s=(0,f.HK)().handleError,a=(0,g.useState)(!1),k=a[0],C=a[1],w=(0,j.C)(h.ZZ).connection,O=(0,x.Ci)(w.key),S=O.data,_=O.isFetching,Z=O.isLoading,z=O.isSuccess,P=(0,x.Lz)(),I=(0,i.Z)(P,1)[0],D=(0,b.EG)(),R=(0,i.Z)(D,1)[0],F=(0,b.NR)(),V=F.data,L=F.isLoading,q=F.error,T=(0,g.useState)(void 0),N=T[0],M=T[1];(0,g.useEffect)((function(){S&&S.items.length&&M(S.items[0].ctl_dataset.fides_key)}),[S]);var H=function(){e.push(v.JR)},Y=function(){var n=(0,r.Z)(c().mark((function n(r){var i,s,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={connection_key:null===w||void 0===w?void 0:w.key,dataset_pairs:r},n.next=3,I(s).unwrap();case 3:a=n.sent,(null===(i=a.failed)||void 0===i?void 0:i.length)>0?t(a.failed[0].message):o("Dataset successfully updated!"),e.push(v.JR);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N)try{n=N,S&&S.items.length&&(n=S.items[0].fides_key),Y([{fides_key:n,ctl_dataset_fides_key:N}])}catch(t){s(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)(c().mark((function e(n){var r,i,o,a,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),r=Array.isArray(n)?n:[n],e.next=5,R(r);case 5:if(!("error"in(i=e.sent))){e.next=10;break}return o=(0,y.e$)(i.error),t(o),e.abrupt("return");case 10:l=(a=r).map((function(e){return{fides_key:e.fides_key,ctl_dataset_fides_key:e.fides_key}})),S&&S.items.length&&(u=S.items,l=u.map((function(e,n){return{fides_key:e.fides_key,ctl_dataset_fides_key:a[n].fides_key}}))),Y(l),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),s(e.t0);case 19:return e.prev=19,C(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(n){return e.apply(this,arguments)}}(),U=""!==N&&void 0!==N;if(_||Z||L&&!q)return(0,E.jsx)(l.M5,{children:(0,E.jsx)(u.$,{})});var K=V&&V.length;return(0,E.jsxs)(l.gC,{alignItems:"left",children:[q?(0,E.jsx)(W,{mb:4,color:"red",children:"There was a problem loading existing datasets, please try again."}):null,(0,E.jsxs)(l.Ug,{spacing:8,mb:4,children:[K?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(l.gC,{alignSelf:"start",mr:4,children:[(0,E.jsxs)(l.xu,{"data-testid":"dataset-selector-section",mb:4,children:[(0,E.jsx)(W,{mb:4,children:"Choose a dataset to associate with this connector."}),(0,E.jsx)(d.Ph,{size:"sm",width:"fit-content",placeholder:"Select",onChange:function(e){M(e.target.value)},value:N,"data-testid":"dataset-selector",children:V.map((function(e){return(0,E.jsx)("option",{value:e.fides_key,children:e.fides_key},e.fides_key)}))})]}),(0,E.jsx)(p.zx,{size:"sm",colorScheme:"primary",alignSelf:"start",disabled:!U,onClick:X,"data-testid":"save-dataset-link-btn",children:"Save"})]}),(0,E.jsx)(W,{children:"or"})]}):null,(0,E.jsxs)(l.xu,{"data-testid":"yaml-editor-section",children:[(0,E.jsx)(W,{mb:4,children:"View your dataset YAML below!"}),z&&null!==S&&void 0!==S&&S.items?(0,E.jsx)(A,{data:S.items.map((function(e){return e.ctl_dataset})),isSubmitting:k,onSubmit:J,disabled:U,onCancel:K?void 0:H}):null]})]}),K?(0,E.jsx)(p.zx,{width:"fit-content",size:"sm",variant:"outline",onClick:H,children:"Cancel"}):null]})}},70452:function(e,n,t){var r=t(59499),i=t(16835),o=t(4730),s=t(27634),a=t(23256),c=t(26894),l=t(30268),u=t(86211),d=t(48591),p=t(82175),f=t(85893),h=["disabled","displayHelpIcon","helpIconVisibility","isRequired","label","type"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.disabled,t=void 0!==n&&n,r=e.displayHelpIcon,x=void 0===r||r,g=e.helpIconVisibility,v=void 0!==g&&g,j=e.isRequired,y=void 0!==j&&j,b=e.label,k=e.type,C=void 0===k?"text":k,w=(0,o.Z)(e,h),O=(0,p.U$)(w),S=(0,i.Z)(O,2),_=S[0],Z=S[1];return(0,f.jsxs)(s.NI,{display:"flex",isRequired:y,isInvalid:!(!Z.error||!Z.touched),children:[b&&(0,f.jsx)(s.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:w.id||w.name,minWidth:"150px",children:b}),(0,f.jsxs)(a.gC,{align:"flex-start",w:"inherit",children:["number"===C&&(0,f.jsxs)(c.Y2,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,f.jsx)(c.zu,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus})),(0,f.jsxs)(c.Fi,{children:[(0,f.jsx)(c.WQ,{}),(0,f.jsx)(c.Y_,{})]})]}),"text"===C&&(0,f.jsx)(l.II,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus,color:"gray.700",isDisabled:t,placeholder:w.placeholder,size:"sm"})),"textarea"===C&&(0,f.jsx)(u.g,m(m({},_),{},{autoComplete:"off",autoFocus:w.autoFocus,color:"gray.700",placeholder:w.placeholder,resize:"none",size:"sm",value:_.value||""})),(0,f.jsx)(s.J1,{children:Z.error})]}),x&&(0,f.jsx)(a.kC,{alignContent:"center",h:"32px",visibility:v?"visible":"hidden",children:(0,f.jsx)(d.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})]})}},5404:function(e,n,t){t.d(n,{E:function(){return r},S:function(){return i}});var r=function(e){return e.toLowerCase().replace(/ /g,"_")},i=function(e,n){var t="".concat(window.location.origin+n,"&key=").concat(e);window.location.href.toLowerCase()!==t.toLowerCase()&&window.history.replaceState(null,"",t)}},16410:function(e,n,t){t.d(n,{h:function(){return o}});var r=t(43894),i=(t(67294),t(85893)),o=function(e){var n=e.isSubmitting,t=void 0!==n&&n,o=e.onCancelClick;return(0,i.jsxs)(r.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,i.jsx)(r.zx,{onClick:o,variant:"outline",children:"Cancel"}),(0,i.jsx)(r.zx,{bg:"primary.800",color:"white",isDisabled:t,isLoading:t,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},children:"Save"})]})}},98643:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(59499),i=t(50029),o=t(16835),s=t(87794),a=t.n(s),c=t(23256),l=t(44359),u=t(70783),d=t(62254),p=t(24302),f=t(11163),h=t(67294),x=t(18459),m=t(97142),g=t(48591),v=t(82175),j=t(74231),y=t(70452),b=t(16410),k=t(85893),C=function(e){var n=e.data,t=void 0===n?[]:n,r=e.isSubmitting,i=void 0!==r&&r,o=e.onSaveClick,s=(0,f.useRouter)(),a=(0,u.VY)().errorAlert,l=function(){s.push(x.JR)};return(0,k.jsx)(v.J9,{enableReinitialize:!0,initialValues:{fields:t.length>0?t:[{pii_field:"",dsr_package_label:""}]},onSubmit:function(e,n){new Set(e.fields.map((function(e){return e.pii_field}))).size<e.fields.length?a("PII Field must be unique"):o(e,n)},validateOnBlur:!1,validateOnChange:!1,validationSchema:j.Ry({fields:j.IX().of(j.Ry().shape({pii_field:j.Z_().required("PII Field is required").min(1,"PII Field must have at least one character").max(200,"PII Field has a maximum of 200 characters").label("PII Field"),dsr_package_label:j.Z_().required("DSR Package Label is required").min(1,"DSR Package Label must have at least one character").max(200,"DSR Package Label has a maximum of 200 characters").label("DSR Package Label")}))}),children:function(e){return(0,k.jsx)(v.l0,{style:{marginTop:0},noValidate:!0,children:(0,k.jsx)(c.gC,{align:"stretch",children:(0,k.jsx)(v.F2,{name:"fields",render:function(n){var t=e.values.fields;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(c.Ug,{color:"gray.900",flex:"1",fontSize:"14px",fontWeight:"semibold",lineHeight:"20px",mb:"6px",spacing:"24px",children:[(0,k.jsx)(c.xu,{w:"416px",children:"PII Field"}),(0,k.jsx)(c.xu,{w:"416px",children:"DSR Package Label"}),(0,k.jsx)(c.xu,{})]}),(0,k.jsx)(c.xu,{maxH:"calc(100vh - 484px)",paddingRight:"13px",overflow:"auto",children:t&&t.length>0?t.map((function(e,t){return(0,k.jsxs)(c.Ug,{mt:t>0?"12px":void 0,spacing:"24px",children:[(0,k.jsx)(c.xu,{h:"57px",w:"416px",children:(0,k.jsx)(y.Z,{autoFocus:0===t,displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".pii_field")})}),(0,k.jsx)(c.xu,{h:"57px",w:"416px",children:(0,k.jsx)(y.Z,{displayHelpIcon:!1,isRequired:!0,name:"fields.".concat(t,".dsr_package_label")})}),(0,k.jsx)(c.xu,{h:"57px",visibility:t>0?"visible":"hidden",children:(0,k.jsx)(g.lr,{onClick:function(){return n.remove(t)},_hover:{cursor:"pointer"}})})]},t)})):null}),(0,k.jsx)(c.xv,{color:"complimentary.500",fontWeight:"medium",fontSize:"sm",mb:"24px !important",mt:"24px !important",onClick:function(){n.push({pii_field:"",dsr_package_label:""})},_hover:{cursor:"pointer"},children:"Add new PII field"}),(0,k.jsx)(b.h,{isSubmitting:i,onCancelClick:l})]})}})})})}})};function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(){var e=(0,h.useRef)(!1),n=(0,f.useRouter)(),t=(0,u.VY)().successAlert,r=(0,u.HK)().handleError,s=(0,h.useState)(!1),g=s[0],v=s[1],j=(0,h.useState)([]),y=j[0],b=j[1],w=(0,m.C)(d.ZZ).connection,S=(0,p.QV)(w.key),_=S.data,Z=S.isFetching,z=S.isLoading,P=S.isSuccess,I=(0,p.jF)(),D=(0,o.Z)(I,1)[0],E=(0,p._d)(),R=(0,o.Z)(E,1)[0],A=function(){var e=(0,i.Z)(a().mark((function e(i,o){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),s={connection_key:null===w||void 0===w?void 0:w.key,body:O({},i)},!(y.length>0)){e.next=8;break}return e.next=6,R(s).unwrap();case 6:e.next=10;break;case 8:return e.next=10,D(s).unwrap();case 10:t("DSR customization ".concat(y.length>0?"updated":"added","!")),n.push(x.JR),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:return e.prev=17,v(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){return e.current=!0,P&&_&&b(_.fields),function(){e.current=!1}}),[_,P]),(0,k.jsxs)(c.gC,{align:"stretch",gap:"16px",children:[(0,k.jsx)(c.xu,{color:"gray.700",fontSize:"14px",w:"572px",children:"Customize your PII fields to create a friendly label name for your privacy request packages. This \u201cPackage Label\u201d is the label your user will see in their downloaded package."}),(Z||z)&&(0,k.jsx)(c.M5,{children:(0,k.jsx)(l.$,{})}),e.current&&!z?(0,k.jsx)(C,{data:y,isSubmitting:g,onSaveClick:A}):null]})}}}]);